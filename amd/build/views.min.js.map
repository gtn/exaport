{"version":3,"file":"views.min.js","sources":["../src/views.js"],"sourcesContent":["var exaportViewEdit;\r\nvar newItem = null, lastclicked = null;\r\n\r\ndefine(['jquery',\r\n        'jqueryui',\r\n        'block_exaport/touchpunch',\r\n        'core/modal_factory',\r\n        'core/modal_events'],\r\n        function($, json, jqui, jquitp, modalFactory, modalEvents) {\r\n\r\n    var dialogue;\r\n    var helpDialogue;\r\n    // var last_popup;\r\n\r\n    var defaultModalOptions = {\r\n        title: 'test title',\r\n        body: '',\r\n        footer: '',\r\n        //template: 'SAVE_CANCEL',\r\n        //type: 'SAVE_CANCEL',\r\n    };\r\n\r\n    var exaportViewEditCreate = function() {\r\n\r\n        var viewEdit = {\r\n\r\n            strip_tags: function(text) {\r\n                let tempDoc = new DOMParser().parseFromString(text, 'text/html');\r\n                return tempDoc.body.textContent || \"\";\r\n            },\r\n\r\n            resetViewContent: function(){\r\n                // Load stored blocks.\r\n                var blocks = $('form :input[name=blocks]').val();\r\n                if (blocks) {\r\n                    blocks = JSON.parse(blocks);\r\n                }\r\n                var myresume = $('form :input[name=myresume]').val();\r\n                if (myresume) {\r\n                    myresume = JSON.parse(myresume);\r\n                }\r\n                if (!blocks) {\r\n                    // Start with headline.\r\n                    blocks = [{\r\n                        type: 'headline'\r\n                    }];\r\n                }\r\n                var portfolioDesignBlocks = $('.portfolioDesignBlocks');\r\n                portfolioDesignBlocks.empty();\r\n                $.each(blocks, function(){\r\n                    generateItem('new', this).appendTo(\r\n                        // Wenn vorhanden zur richtigen spalte hinzufÃ¼gen, sonst immer zur 1ten.\r\n                        (this.positionx && portfolioDesignBlocks[this.positionx - 1]) ? portfolioDesignBlocks[this.positionx - 1] : portfolioDesignBlocks[0]\r\n                    );\r\n                });\r\n                resetElementStates();\r\n                updateBlockData();\r\n            },\r\n\r\n            initAddItems: function(/*title*/){\r\n                $('#add-items-list .add-item').click(function(event){\r\n                    var $input = $(this).find('input');\r\n\r\n                    if (!$(event.target).is(':input')) {\r\n                        // Toggle checkbox (if the user clicked the div and not the checkbox).\r\n                        $input.prop('checked', !$input.prop('checked'));\r\n                    }\r\n\r\n                    if ($input.prop('checked')) {\r\n                        $(this).addClass('checked');\r\n                    } else {\r\n                        $(this).removeClass('checked');\r\n                    }\r\n                });\r\n            },\r\n\r\n            addPersonalInfo: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var data = new Object();\r\n                data.type = 'personal_information';\r\n                data.id = id;\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                // if ($('#firstname').attr('checked') == 'checked') {\r\n                var fncheckbox = $('.pieform input[name=\"fields\\[firstname\\]\"]').first();\r\n                if (fncheckbox !== undefined && fncheckbox.is(':checked')) {\r\n                    data.firstname = fncheckbox.val();\r\n                }\r\n                // if ($('#lastname').attr('checked') == 'checked') {\r\n                var lncheckbox = $('.pieform input[name=\"fields\\[lastname\\]\"]').first();\r\n                if (lncheckbox.is(':checked')) {\r\n                    data.lastname = lncheckbox.val();\r\n                }\r\n                data.picture = $('form input[name=picture]:checked').val();\r\n                data.email = $('form input[name=email]:checked').val();\r\n                // ...data.text = tinyMCE.get('block_intro').getContent();.\r\n                data.text = $('#id_block_intro').val();\r\n                // If it is tinyMCE: use #tinymce.\r\n                if ($('.mceEditor iframe').length) {\r\n                    var iframe = $('.mceEditor iframe');\r\n                    var iframetextElement = $('#tinymce', iframe.contents());\r\n                    if (iframetextElement.length) {\r\n                        data.text = iframetextElement.html();\r\n                    }\r\n                }\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addHeadline: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.text = $('#headline').val();\r\n                data.type = 'headline';\r\n                data.id = id;\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                // ...$E.last_popup.remove();.\r\n                newItem = null;\r\n                dialogue.hide();\r\n                saveBlockData();\r\n            },\r\n\r\n            addText: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.type = 'text';\r\n                data.id = id;\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                // ...data.text = tinymce.get('block_text').getContent();.\r\n                data.text = $('#id_block_text').val();\r\n                // If it is tinyMCE: use #tinymce.\r\n                if ($('.mceEditor iframe').length) {\r\n                    var iframe = $('.mceEditor iframe');\r\n                    var iframetextElement = $('#tinymce', iframe.contents());\r\n                    if (iframetextElement.length) {\r\n                        data.text = iframetextElement.html();\r\n                    }\r\n                }\r\n                // ...data.text = $('#id_text').val();.\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addItem: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                $('#blockform input.add-item-checkbox:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    };\r\n                    data = {};\r\n                    data.type = 'item';\r\n                    data.itemid = $(this).val();\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addCvInfo: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                $('#blockform input.add-cvitem-checkbox:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    }\r\n                    data = {};\r\n                    data.type = 'cv_information';\r\n                    data.itemid = $(this).val();\r\n                    if ($('#blockform [name=\"add_withfiles\"]').is(\":checked\")) {\r\n                        data.resume_withfiles = 1;\r\n                    } else {\r\n                        data.resume_withfiles = 0;\r\n                    }\r\n                    data.resume_itemtype = $(this).attr('data-cvtype');\r\n                    var goalsSkills = ['goalspersonal', 'goalsacademic', 'goalcareers',\r\n                                       'skillspersonal', 'skillsacademic', 'skillscareers'];\r\n                    if (goalsSkills.indexOf(data.resume_itemtype) > -1) {\r\n                        data.itemid = null;\r\n                    }\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addMedia: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                data.type = 'media';\r\n                data.contentmedia = $('#block_media').val();\r\n                data.width = $('#block_width').val();\r\n                data.height = $('#block_height').val();\r\n                data.create_as_note = $('input[name=create_as_note]:checked').length ? 1 : 0;\r\n                data.id = id;\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addBadge: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                $('#blockform input[name=\"add_badges[]\"]:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    };\r\n                    data = {};\r\n                    data.type = 'badge';\r\n                    data.itemid = $(this).val();\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            checkFields: function() {\r\n                var ok = true;\r\n                $('#blockform .not-empty-check').each(function(){\r\n                    var forInput = $(this).attr('for');\r\n                    var input = $('#blockform').find('input[name=\"' + forInput + '\"]');\r\n                    if (input.length == 0) {\r\n                        // Input not found, ignore.\r\n                        $(this).hide();\r\n                        return;\r\n                    }\r\n                    if (input.val().length) {\r\n                        // Has value.\r\n                        $(this).hide();\r\n                        return;\r\n                    }\r\n                    // Show error.\r\n                    $(this).show();\r\n                    input.focus();\r\n                    ok = false;\r\n                    return false;\r\n                });\r\n\r\n                // All checks ok.\r\n                return ok;\r\n            },\r\n\r\n            filterItemsByTag: function() {\r\n                // Clear the search by title.\r\n                $('#filterByTitle').val('');\r\n                $('div.add-item-category').hide();\r\n                $('div.add-item').show();\r\n                $('div.add-item-sub').show();\r\n                $('tr.sharedArtefacts').show();\r\n                var selectedTag = $('.tagfilter').val();\r\n                if (selectedTag != '') {\r\n                    $('div.add-item').each(function() {\r\n                        var elementTags = $(this).data('tags');\r\n                        if (elementTags !== undefined) {\r\n                            if (elementTags.indexOf(selectedTag) == -1) {\r\n                                $(this).hide();\r\n                            }\r\n                        } else {\r\n                            $(this).hide();\r\n                        }\r\n                    });\r\n                } else {\r\n                    $('div.add-item-category, div.add-item-sub').show();\r\n                }\r\n                // Hide category names if it has no visible artefact.\r\n                $('div.add-item-sub').each(function(){\r\n                    if ($(this).find('div.add-item:visible').length == 0) {\r\n                        $(this).hide();\r\n                    }\r\n                });\r\n                $('div.add-item:visible').each(function() {\r\n                    var category_id = $(this).data('category');\r\n                    $('div.add-item-category[data-category=\"' + category_id + '\"]').show();\r\n                });\r\n                // List of shared artefacts.\r\n                if ($('div.add-item[data-category=\"sharedFromUser\"]:visible').length == 0) {\r\n                    $('tr.sharedArtefacts').hide();\r\n                }\r\n            },\r\n\r\n            filterItemsByTitle: function() {\r\n                // Reset filter by tag.\r\n                if ($('.tagfilter').length) {\r\n                    $('.tagfilter')[0].selectedIndex = 0;\r\n                }\r\n                var text = $('#blockform #filterByTitle').val().toLowerCase();\r\n                $('div.add-item-category').hide();\r\n                $('div.add-item').show();\r\n                $('div.add-item-sub').show();\r\n                $('tr.sharedArtefacts').show();\r\n                if (text != '') {\r\n                    $('div.add-item:visible').each(function() {\r\n                        var elementText = $(this).text();\r\n                        if (elementText.toLowerCase().indexOf(text) > -1) {\r\n                            $(this).show();\r\n                        } else {\r\n                            $(this).hide();\r\n                        }\r\n                    });\r\n                } else {\r\n                    $('div.add-item-category, div.add-item-sub').show();\r\n                }\r\n                // Hide category names if it has no visible artefact.\r\n                $('div.add-item-sub').each(function() {\r\n                    if ($(this).find('div.add-item:visible').length == 0) {\r\n                        $(this).hide();\r\n                    }\r\n                });\r\n                $('div.add-item:visible').each(function(){\r\n                    var category_id = $(this).data('category');\r\n                    $('div.add-item-category[data-category=\"' + category_id + '\"]').show();\r\n                });\r\n                // List of shared artefacts.\r\n                if ($('div.add-item[data-category=\"sharedFromUser\"]:visible').length == 0) {\r\n                    $('tr.sharedArtefacts').hide();\r\n                }\r\n            },\r\n\r\n            clearItemFilters: function() {\r\n                if ($('.tagfilter').length) {\r\n                    $('.tagfilter')[0].selectedIndex = 0;\r\n                }\r\n                $('#blockform #filterByTitle').val('');\r\n                exaportViewEdit.filterItemsByTitle();\r\n            },\r\n\r\n            cancelAddEdit: function() {\r\n                dialogue.hide();\r\n                updateBlockData();\r\n            },\r\n\r\n        }\r\n        return viewEdit;\r\n    };\r\n\r\n    function resetElementStates()\r\n    {\r\n        $('.portfolioOptions li').removeClass('selected');\r\n        $('.portfolioDesignBlocks > li').each(function() {\r\n            $('.portfolioOptions li[itemid=' + $(this).data('portfolio').itemid + ']').addClass('selected');\r\n        });\r\n    }\r\n\r\n    function updateBlockData()\r\n    {\r\n        var blocks = [];\r\n        $('.portfolioDesignBlocks').each(function(positionx) {\r\n            // Immediate li children, because content can have li too.\r\n            $(this).children('li:visible').not('.block-placeholder').each(function(positiony) {\r\n                blocks.push($.extend($(this).data('portfolio'), {\r\n                    positionx: positionx + 1,\r\n                    positiony: positiony + 1\r\n                }));\r\n            });\r\n        });\r\n\r\n        var input = $('form :input[name=blocks]');\r\n        input.val(JSON.stringify(blocks));\r\n    }\r\n\r\n    function generateItem(type, data)\r\n    {\r\n        var $item;\r\n        if (type == 'new') {\r\n            $item = $('<li></li>');\r\n            $item.data('portfolio', data);\r\n        } else {\r\n            $item = $(data);\r\n\r\n            data = $item.data('portfolio');\r\n            if (!data) {\r\n                data = {};\r\n                if ($item.attr('itemid')) {\r\n                    data.type = 'item';\r\n                    data.itemid = $item.attr('itemid');\r\n                } else {\r\n                    data.type = $item.attr('block-type');\r\n                    if ($item.attr('text')) {\r\n                        data.text = $item.attr('text');\r\n                    }\r\n                    if ($item.attr('block_title')) {\r\n                        data.block_title = $item.attr('block_title');\r\n                    }\r\n                    if ($item.attr('firstname')) {\r\n                        data.firstname = $item.attr('firstname');\r\n                    }\r\n                    if ($item.attr('lastname')) {\r\n                        data.lastname = $item.attr('lastname');\r\n                    }\r\n                    if ($item.attr('picture')) {\r\n                        data.picture = $item.attr('picture');\r\n                    }\r\n                    if ($item.attr('email')) {\r\n                        data.email = $item.attr('email');\r\n                    }\r\n                }\r\n                // Store data.\r\n                $item.data('portfolio', data);\r\n            }\r\n        }\r\n\r\n        $item.addClass('item');\r\n        $item.css('position', 'relative');\r\n        /*\r\n        Bug, wenn auf relativ setzen\r\n        if ($.browser.msie) {\r\n            $item.css('height', '1%');\r\n        }.\r\n        */\r\n        // var header_content = '';\r\n        var portfolioItems;\r\n        var $E = window.block_exaport;\r\n        if (data.itemid && !data.item && portfolioItems && portfolioItems[data.itemid]) {\r\n            data.item = portfolioItems[data.itemid];\r\n        }\r\n        if (data.type == 'item' && data.itemid && data.item) {\r\n            var item_data = data.item;\r\n            var ilink = item_data.link;\r\n            if (ilink != \"\") {\r\n                ilink = $E.translate('link') + ': ' + ilink + '<br />';\r\n            }\r\n\r\n            var itemPictures = '';\r\n            if (item_data.filescount > 1) {\r\n                var imgWidth = 40;\r\n                if (item_data.filescount > 3) {\r\n                    imgWidth = 35;\r\n                }\r\n                if (item_data.filescount > 5) {\r\n                    imgWidth = 30;\r\n                }\r\n                itemPictures += '<div class=\"pictureset\" style=\"float:right; position: relative; text-align: right; max-width: 150px;\">';\r\n                for (var imi = 0; imi < item_data.filescount; imi++) {\r\n                    if (imi && imi % 5 === 0) {\r\n                        itemPictures += '<br />';\r\n                    }\r\n                    // itemPictures += '<div class=\"picture\" style=\"float:right; position: relative; height: '+imgWidth+'px; width: '+imgWidth+'px;\">';\r\n                    itemPictures += '<div class=\"picture\" style=\"float:right; height: '+imgWidth+'px; width: '+imgWidth+'px;\">';\r\n                    itemPictures += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + M.cfg['wwwroot'] + '/blocks/exaport/item_thumb.php?item_id=' + item_data.id + '&imindex='+imi+'\">';\r\n                    itemPictures += '</div>';\r\n                }\r\n                itemPictures += '</div>';\r\n            } else {\r\n                itemPictures += '<div class=\"picture\" style=\"float:right; position: relative; height: 100px; width: 100px;\">';\r\n                itemPictures += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + M.cfg['wwwroot'] + '/blocks/exaport/item_thumb.php?item_id=' + item_data.id + '\">';\r\n                itemPictures += '</div>';\r\n            }\r\n\r\n            var tempString = '';\r\n            tempString += '<div id=\"id_holder\" style=\"display:none;\"></div> ';\r\n            tempString += '<div class=\"item_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('viewitem') + ': ' + item_data.name + '</div>';\r\n            tempString += itemPictures;\r\n            tempString += '<div class=\"body\">' + $E.translate('type') + ': ' + $E.translate(item_data.type) + '<br />';\r\n            tempString += $E.translate('category') + ': ' + item_data.category + '<br />' + ilink;\r\n            tempString += $E.translate('comments') + ': ' + item_data.comments + '<div class=\"exaport-item-intro\"></div>';\r\n            if (item_data.competences) {\r\n                tempString += '<script type=\"text/javascript\" src=\"javascript/wz_tooltip.js\"></script><a onmouseover=\"Tip(\\'' + item_data.competences + '\\')\" onmouseout=\"UnTip()\"><img src=\"' + M.cfg['wwwroot'] + '/pix/t/grades.png\" class=\"iconsmall\" alt=\"' + 'competences' + '\" /></a>';\r\n            }\r\n            tempString += '</div></div>';\r\n            $item.html(tempString);\r\n            if (!item_data.competences) {\r\n                // User html may be malformed, so savely inject it here.\r\n                $item.find('.exaport-item-intro').html(item_data.intro);\r\n            }\r\n        } else if (data.type == 'personal_information') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"personal_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('personalinformation') + ': </div>';\r\n            tempString += '<div class=\"picture\" style=\"float:right; position: relative;\"></div>';\r\n            tempString += '<div class=\"name\"></div>';\r\n            tempString += '<div class=\"email\"></div>';\r\n            tempString += '<div class=\"body\"></div>';\r\n            tempString += '</div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append(data.block_title);\r\n            if (data.picture != '' && data.picture != null) {\r\n                $item.find('div.picture').append('<img src=\"' + data.picture + '\">');\r\n            }\r\n            $item.find('div.name').append(data.firstname); $item.find('div.name').append(' ');\r\n            $item.find('div.name').append(data.lastname);\r\n            $item.find('div.email').append(data.email);\r\n            $item.find('div.body').append(data.print_text);\r\n        } else if (data.type == 'headline') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\">' + $E.translate('view_specialitem_headline') + '<div class=\"body\"></div></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.body').append(data.print_text);\r\n        } else if (data.type == 'media') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\"></div><div class=\"body\"></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append($E.translate('view_specialitem_media') + ($.trim(data.block_title).length ? ': ' + data.block_title : ''));\r\n            $item.find('div.body').append(data.contentmedia);\r\n        } else if (data.type == 'badge') {\r\n            if (typeof data.badge == 'undefined') {\r\n                $item.html('loading');\r\n            } else {\r\n                var badge = data.badge;\r\n                var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n                tempString += '<div class=\"item_info\" style=\"overflow: hidden;\">';\r\n                tempString += '<div class=\"header\">' + $E.translate('view_specialitem_badge') + ': ' + badge.name + '</div>';\r\n                tempString += '<div class=\"picture\" style=\"float:right; position: relative; height: 100px; width: 100px;\">';\r\n                tempString += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + badge.imageUrl + '\">';\r\n                tempString += '</div>';\r\n                tempString += '<div class=\"body\">' + badge.description + '</div>';\r\n                                    /* +\r\n                                    '</div>' +\r\n                                    '<div class=\"body\">'+$E.translate('type')+': '+$E.translate(item_data.type)+'<br />' +\r\n                                    $E.translate('category')+': '+item_data.category+'<br />' + ilink +\r\n                                    $E.translate('comments')+': '+item_data.comments+'<br />' + item_data.intro +\r\n                                    '</div>\r\n                                    */\r\n                $item.html(tempString);\r\n            }\r\n        } else if (data.type == 'cv_information') {\r\n            data.item = null;\r\n            var body_content = '';\r\n            // var titleContent = '';\r\n            var resumeItems;\r\n            var addToHeader = '';\r\n            var attachments = [];\r\n            console.log(data.resume_itemtype);\r\n            switch (data.resume_itemtype) {\r\n                case 'cover':\r\n                    body_content = '123';\r\n                    break;\r\n                case 'edu':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_education_history');\r\n                    if (data.itemid && resumeItems && resumeItems.educations[data.itemid]) {\r\n                        item_data = resumeItems.educations[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"edu_institution\">' + item_data.institution + ':</span> ';\r\n                        description += '<span class=\"edu_qualname\">' + item_data.qualname + '</span>';\r\n                        if (item_data.startdate != '' || item_data.enddate != '') {\r\n                            description += ' (';\r\n                            if (item_data.startdate != '') {\r\n                                description += '<span class=\"edu_startdate\">' + item_data.startdate + '</span>';\r\n                            }\r\n                            if (item_data.enddate != '') {\r\n                                description += '<span class=\"edu_enddate\"> - ' + item_data.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (item_data.qualdescription != '') {\r\n                            description += '<span class=\"edu_qualdescription\">' + item_data.qualdescription + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'employ':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_employment_history');\r\n                    if (data.itemid && resumeItems && resumeItems.employments[data.itemid]) {\r\n                        item_data = resumeItems.employments[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"employ_jobtitle\">' + item_data.jobtitle + ':</span> ';\r\n                        description += '<span class=\"employ_employer\">' + item_data.employer + '</span>';\r\n                        if (item_data.startdate != '' || item_data.enddate != '') {\r\n                            description += ' (';\r\n                            if (item_data.startdate != '') {\r\n                                description += '<span class=\"employ_startdate\">' + item_data.startdate + '</span>';\r\n                            }\r\n                            if (item_data.enddate != '') {\r\n                                description += '<span class=\"employ_enddate\"> - ' + item_data.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (item_data.positiondescription != '') {\r\n                            description += '<span class=\"employ_positiondescription\">' + item_data.positiondescription + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'certif':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_certif');\r\n                    if (data.itemid && resumeItems && resumeItems.certifications[data.itemid]) {\r\n                        item_data = resumeItems.certifications[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"certif_title\">' + item_data.title + '</span> ';\r\n                        if (item_data.date != '') {\r\n                            description += '<span class=\"certif_date\">(' + item_data.date + ')</span>';\r\n                        }\r\n                        if (item_data.description != '') {\r\n                            description += '<span class=\"certif_description\">' + item_data.description + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'public':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_public');\r\n                    if (data.itemid && resumeItems && resumeItems.publications[data.itemid]) {\r\n                        item_data = resumeItems.publications[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"public_title\">' + item_data.title;\r\n                        if (item_data.contribution != '') {\r\n                            description += ' (' + item_data.contribution + ')';\r\n                        }\r\n                        description += '</span> ';\r\n                        if (item_data.date != '') {\r\n                            description += '<span class=\"public_date\">(' + item_data.date + ')</span>';\r\n                        }\r\n                        if (item_data.contributiondetails != '' || item_data.url != '') {\r\n                            description += '<span class=\"public_description\">';\r\n                            if (item_data.contributiondetails != '') {\r\n                                description += item_data.contributiondetails;\r\n                            }\r\n                            if (item_data.url != '') {\r\n                                description += '<br /><a href=\"' + item_data.url + '\" class=\"public_url\" target=\"_blank\">' + item_data.url + '</a>';\r\n                            }\r\n                            description += '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'mbrship':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_mbrship');\r\n                    if (data.itemid && resumeItems && resumeItems.profmembershipments[data.itemid]) {\r\n                        item_data = resumeItems.profmembershipments[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"mbrship_title\">' + item_data.title + '</span> ';\r\n                        if (item_data.startdate != '' || item_data.enddate != '') {\r\n                            description += ' (';\r\n                            if (item_data.startdate != '') {\r\n                                description += '<span class=\"mbrship_startdate\">' + item_data.startdate + '</span>';\r\n                            }\r\n                            if (item_data.enddate != '') {\r\n                                description += '<span class=\"mbrship_enddate\"> - ' + item_data.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (item_data.description != '') {\r\n                            description += '<span class=\"mbrship_description\">' + item_data.description + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'goalspersonal':\r\n                case 'goalsacademic':\r\n                case 'goalscareers':\r\n                case 'skillspersonal':\r\n                case 'skillsacademic':\r\n                case 'skillscareers':\r\n                    attachments = resumeItems[data.resume_itemtype + '_attachments'];\r\n                    // console.log(resumeItems);\r\n                    // console.log(data.resume_itemtype + '_attachments');\r\n                    addToHeader = $E.translate('resume_' + data.resume_itemtype);\r\n                    var description = '';\r\n                    if (resumeItems['' + data.resume_itemtype]) {\r\n                        description += '<span class=\"' + data.resume_itemtype + '_text\">' + resumeItems['' + data.resume_itemtype] + '</span> ';\r\n                    }\r\n                    body_content = description;\r\n                    break;\r\n                case 'interests':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_interests');\r\n                    var description = '';\r\n                    if (resumeItems.interests != '') {\r\n                        description += '<span class=\"interests\">' + resumeItems.interests + '</span> ';\r\n                    }\r\n                    body_content = description;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (data.resume_withfiles == \"1\" && attachments && attachments.length) {\r\n                body_content += '<ul class=\"resume_attachments ' + data.resume_itemtype + '_attachments\">';\r\n                $.each(attachments, function (k, file) {\r\n                    body_content += '<li><a href=\"' + file.fileurl + '\" target=\"_blank\">' + file.filename + '</a></li>';\r\n                });\r\n                body_content += '</ul>';\r\n            }\r\n\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"cv_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('cvinformation') + ': ' + addToHeader + '</div>';\r\n            tempString += '<div class=\"body\">' + body_content + '</div>';\r\n            tempString += '</div>';\r\n            $item.html(tempString);\r\n        } else {\r\n            data.type = 'text';\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\"></div>';\r\n            tempString += '<div class=\"body\"><p class=\"text\" ' + $E.translate('view_specialitem_text_defaulttext') + '\"></p></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append($E.translate('view_specialitem_text') + ($.trim(data.block_title).length ? ': ' + data.block_title : ''));\r\n            $item.find('div.body').append(data.print_text);\r\n        }\r\n\r\n        // Insert default texts.\r\n        $item.find(':input[default-text]').focus(function(){\r\n            $(this).removeClass('default-text');\r\n            if ($(this).attr('default-text') == $(this).val()) {\r\n                $(this).val('');\r\n            }\r\n        }).blur(function(){\r\n            if (!$.trim($(this).val())) {\r\n                $(this).addClass('default-text');\r\n                $(this).val($(this).attr('default-text'));\r\n            }\r\n        }).blur();\r\n        $item.find('div#id_holder').append(data.id);\r\n\r\n        if (type == 'new') {\r\n            // No edit button for items, badges and resume items.\r\n            var typesWithoutEditButton = ['item', 'badge', 'cv_information'];\r\n            // if ((data.type != 'item') && (data.type != 'badge')) {\r\n            if (!(typesWithoutEditButton.indexOf(data.type) > -1)) {\r\n                $('<a class=\"edit\" title=\"Edit\"><span>Edit</span></a>').prependTo($item).click(editItemClick);\r\n            }\r\n        }\r\n        else {\r\n            $item.append('<a class=\"unsaved\" title=\"This block was not saved\"><span>Unsaved</span></a>');\r\n        }\r\n        $('<a class=\"delete\" title=\"' + $E.translate('delete') + '\"><span>' + $E.translate('delete') + '</span></a>').prependTo($item).click(deleteItemClick);\r\n        $item.find(':input').change(function() {\r\n            $item.data('portfolio').text = $(this).val();\r\n        });\r\n        updateBlockData();\r\n        // Unshared blocks.\r\n        if (data.unshared == 1) {\r\n            $item.find('div.item_info').addClass('unshared_block');\r\n            $item_header = $item.find('div.header').html();\r\n            $item.find('div.header').html($item_header + '<span class=\"unshared_message\">Unshared</span>');\r\n        }\r\n        return $item;\r\n    }\r\n\r\n    // Click on 'delete' block.\r\n    function deleteItemClick()\r\n    {\r\n        $(this).parents('.item').remove();\r\n        resetElementStates();\r\n        updateBlockData();\r\n    }\r\n\r\n    function saveBlockData() {\r\n        var data = $('form#view_edit_form').serializeArray();\r\n        data.push({name: 'ajax', value: 1});\r\n        showPreloadinator($('#view-preview'), '', true);\r\n        $.ajax({\r\n            url: document.location.href,\r\n            type: 'POST',\r\n            data: data,\r\n            success: function(res) {\r\n                var data = JSON.parse(res);\r\n                $('form :input[name=blocks]').val(data.blocks);\r\n                exaportViewEdit.resetViewContent();\r\n                hidePreloadinator($('#view-preview'), '');\r\n            }\r\n        });\r\n    }\r\n\r\n    function editItemClick()\r\n    {\r\n        var item_id = $(this).parent().find(\"#id_holder\").html();\r\n        lastclicked = $(this).parent();\r\n        showPreloadinator(lastclicked, '', false);\r\n        $.ajax({\r\n            url: M.cfg['wwwroot'] + '/blocks/exaport/blocks.json.php',\r\n            type: 'POST',\r\n            data: {\r\n                item_id: item_id,\r\n                action: 'edit',\r\n                'viewid': $('form :input[name=viewid]').val(),\r\n                'text[itemid]': $('form :input[name=draft_itemid]').val(),\r\n                sesskey: $('form :input[name=sesskey]').val()\r\n            },\r\n            success: function(res) {\r\n                var data = JSON.parse(res);\r\n\r\n                showDialog(data.modalTitle, data.html);\r\n                // Focus first element.\r\n                // ...popup.$body.find('input:visible:first').focus();.\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    // Main function -> will be started on page load.\r\n    var initContentEdit = function() {\r\n\r\n        exaportViewEdit = exaportViewEditCreate();\r\n        exaportViewEdit.resetViewContent();\r\n\r\n        $(\".portfolioDesignBlocks\").sortable({\r\n            beforeStop: function (event, ui) {\r\n                newItem = ui.item;\r\n            },\r\n            receive: function(e, ui){\r\n\r\n                console.log('start to modal!');\r\n\r\n                // Get ajax only for item from the top block.\r\n                var uiattr = $(ui.item[0]).closest('ul').prop(\"className\");\r\n                if (uiattr.search(\"portfolioDesignBlocks\") == -1) {\r\n                    $.ajax({\r\n                        url: M.cfg['wwwroot'] + '/blocks/exaport/blocks.json.php',\r\n                        type: 'POST',\r\n                        data: {\r\n                            type_block: ui.item.attr('block-type'),\r\n                            action: 'add',\r\n                            'viewid': $('form :input[name=viewid]').val(),\r\n                            'text[itemid]': $('form :input[name=draft_itemid]').val(),\r\n                            sesskey: $('form :input[name=sesskey]').val()\r\n                        },\r\n                        success: function(res) {\r\n                            var data = JSON.parse (res);\r\n\r\n                            showDialog(data.modalTitle, data.html);\r\n\r\n                            // ...var popup = $E.popup({ body_content: data.html, onhide: function(){\r\n                            // if (newItem) $(newItem).remove();\r\n                            // } });\r\n                            // focus first element\r\n                            // $E.last_popup.$body.find('input:visible:first').focus();.\r\n\r\n                            // Create a <script> tag from result.\r\n                            $('#temp_javascript').remove();\r\n                            var script = document.createElement('script');\r\n                            $(script).attr('id', 'temp_javascript');\r\n                            // console.log(data.script);\r\n                            script.textContent = data.script;\r\n                            document.body.appendChild(script);\r\n\r\n                            $('body').on('change keydown paste input', '#filterByTitle', exaportViewEdit.filterItemsByTitle);\r\n                        }\r\n                    });\r\n                    updateBlockData();\r\n                }\r\n            },\r\n            update: function(e, ui) {\r\n                updateBlockData();\r\n            },\r\n            handle: '.header',\r\n            placeholder: \"block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            connectWith: ['.portfolioDesignBlocks'],\r\n        });\r\n        $(\".portfolioOptions\").sortable({\r\n            connectWith: ['.portfolioDesignBlocks'],\r\n            placeholder: \"block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            stop: function(e, ui) {\r\n                // Listenelemente zurÃ¼cksetzen.\r\n                resetElements();\r\n            }\r\n            /*\r\n            remove: function(e, ui){\r\n                console.log(ui);\r\n                console.log(ui.element.html());\r\n                // ui.item.after(ui.placeholder.clone().css('visibility', ''));\r\n                console.log('remove');\r\n            }\r\n            */\r\n        });\r\n        $(\".portfolioElement\").draggable({\r\n            connectToSortable: '.portfolioDesignBlocks',\r\n            placeholder: \".block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            helper: \"clone\",\r\n            stop: function(e, ui){\r\n                showPreloadinator($(ui.helper), '', false);\r\n            }\r\n        });\r\n        $('body').on('click', '[data-toggle=\"gtn-help-modal\"]', function(e) {\r\n            e.preventDefault();\r\n            var trigger = $(this);\r\n            var title = $(this).attr('data-title');\r\n            var content = $(this).attr('data-content');\r\n            if (helpDialogue) {\r\n                helpDialogue.setTitle(title);\r\n                helpDialogue.setBody(content);\r\n                helpDialogue.show();\r\n            } else {\r\n                modalFactory.create({\r\n                    title: title,\r\n                    body: content,\r\n                    footer: '',\r\n                }, trigger).done(function (modal) {\r\n                    helpDialogue = modal;\r\n                    helpDialogue.setTitle(title);\r\n                    helpDialogue.setBody(content);\r\n                    // Display the dialogue.\r\n                    helpDialogue.show();\r\n                });\r\n            }\r\n        });\r\n\r\n\r\n    } // End initContentEdit.\r\n\r\n    function showPreloadinator(element, tohide, fixedposition) {\r\n        var id = 'preloader' + $.now();\r\n        var preloadinatorTemplate = '<div id=\"' + id + '\" class=\"preloader ' + (fixedposition ? 'preloader-fixed' : '') + ' js-preloader flex-center\">' +\r\n                '<div class=\"dots\">'+\r\n                    '<div class=\"dot\"></div>'+\r\n                    '<div class=\"dot\"></div>'+\r\n                    '<div class=\"dot\"></div>'+\r\n                '</div>'+\r\n            '</div>';\r\n        if (tohide != '') {\r\n            element.find(tohide).hide();\r\n        }\r\n        element.append(preloadinatorTemplate);\r\n        // hide element on very long requests\r\n        setTimeout('$(\\'#' + id + '\\').remove();', 15000); // 15 seconds\r\n\r\n    } // End showPreloadinator\r\n\r\n    function hidePreloadinator(element, toshow) {\r\n        if (toshow != '') {\r\n            $(element).find('.blocktype').show();\r\n        }\r\n        $(element).find('.preloader').remove();\r\n    } // End hidePreloadinator\r\n\r\n    function showDialog(title, body) {\r\n        if (dialogue) {\r\n            dialogue.setTitle(title);\r\n            dialogue.setBody(body);\r\n            // Display the dialogue.\r\n            dialogue.show();\r\n        } else {\r\n            modalFactory.create(defaultModalOptions).done(function (modal) {\r\n                dialogue = modal;\r\n                dialogue.setTitle(title);\r\n                dialogue.setBody(body);\r\n                // Display the dialogue.\r\n                dialogue.show();\r\n                // On show handler\r\n                /*dialogue.getRoot().on(modalEvents.shown, function () {\r\n                    console.log('modal is shown');\r\n                    console.log(data);\r\n                    dialogue.setTitle(data.modalTitle);\r\n                    dialogue.setBody(data.html);\r\n                });*/\r\n                // On show handler. (for slow requests)\r\n                dialogue.getRoot().on(modalEvents.shown, function () {\r\n                    hidePreloadinator(newItem, '.blocktype');\r\n                    hidePreloadinator(lastclicked, '');\r\n                    // console.log('modal is shown');\r\n                });\r\n                // On hide handler.\r\n                dialogue.getRoot().on(modalEvents.hidden, function () {\r\n                    // Empty modal contents when it's hidden.\r\n                    // console.log('modal is hidden');\r\n                    dialogue.setBody('');\r\n                    // Hide handler.\r\n                    if (newItem) {\r\n                        $(newItem).remove();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    // Sharing.\r\n    function update_sharing()\r\n    {\r\n        var share_text = '';\r\n        var $form = $('#exaport-view-mod');\r\n\r\n        if ($form.find(':input[name=externaccess]').is(':checked')) {\r\n            share_text += $E.translate('externalaccess') + ' ';\r\n            $('#externaccess-settings').show();\r\n        } else {\r\n            $('#externaccess-settings').hide();\r\n        }\r\n\r\n        if ($form.find(':input[name=internaccess]').is(':checked')) {\r\n            $('#internaccess-settings').show();\r\n            $('#internaccess-groups').hide();\r\n            if (share_text) {\r\n                share_text += ' ' + $E.translate('viewand') + ' ';\r\n            }\r\n            share_text += $E.translate('internalaccess') + ': ';\r\n\r\n            if ($form.find(':input[name=shareall]:checked').val() == 1) {\r\n                share_text += $E.translate('internalaccessall');\r\n                $('#internaccess-users').hide();\r\n                $('#internaccess-groups').hide();\r\n            } else if ($form.find(':input[name=shareall]:checked').val() == 2) {\r\n                share_text += $E.translate('internalaccessgroups');\r\n                $('#internaccess-users').hide();\r\n                $('#internaccess-groups').show();\r\n                ExabisEportfolio.load_grouplist('views_mod');\r\n            } else {\r\n                share_text += $E.translate('internalaccessusers');\r\n                $('#internaccess-groups').hide();\r\n                $('#internaccess-users').show();\r\n                ExabisEportfolio.load_userlist('views_mod');\r\n            }\r\n        } else {\r\n            $('#internaccess-settings').hide();\r\n        }\r\n\r\n        if ($form.find(':input[name=sharedemails]').is(':checked')) {\r\n            if (share_text) {\r\n                share_text += ' ' + $E.translate('viewand') + ' ';\r\n            };\r\n            share_text += $E.translate('emailaccess') + ' ';\r\n            $('#emailaccess-settings').show();\r\n        } else {\r\n            $('#emailaccess-settings').hide();\r\n        };\r\n\r\n        if (!share_text) {\r\n            share_text = $E.translate('view_sharing_noaccess');\r\n        }\r\n        $('#view-share-text').html(share_text);\r\n    }\r\n\r\n    /*var initialise = function($params) {\r\n            console.log('exaport AMD loaded');\r\n            initContentEdit();\r\n            // for sharing of views\r\n            // changing the checkboxes / radiobuttons update the sharing text, visible options, etc.\r\n            $('.view-sharing input[type=checkbox], .view-sharing input[type=radio]').click(update_sharing);\r\n            update_sharing();\r\n        };\r\n        return initialise();.\r\n    */\r\n\r\n    // MAIN code of MODULE.\r\n    return {\r\n        initialise: function (/*$params*/) {\r\n            // console.log('exaport AMD loaded');\r\n            initContentEdit();\r\n            // For sharing of views\r\n            // changing the checkboxes / radiobuttons update the sharing text, visible options, etc.\r\n            $('.view-sharing input[type=checkbox], .view-sharing input[type=radio]').click(update_sharing);\r\n            update_sharing();\r\n        },\r\n    };\r\n\r\n});\r\n"],"names":["exaportViewEdit","newItem","lastclicked","define","$","json","jqui","jquitp","modalFactory","modalEvents","dialogue","helpDialogue","defaultModalOptions","title","body","footer","resetElementStates","removeClass","each","this","data","itemid","addClass","updateBlockData","blocks","positionx","children","not","positiony","push","extend","val","JSON","stringify","generateItem","type","$item","attr","text","block_title","firstname","lastname","picture","email","css","$E","window","block_exaport","item","item_data","ilink","link","translate","itemPictures","filescount","imgWidth","imi","M","cfg","id","tempString","name","category","comments","competences","html","find","intro","append","print_text","trim","length","contentmedia","badge","imageUrl","description","body_content","addToHeader","attachments","console","log","resume_itemtype","resumeItems","interests","resume_withfiles","k","file","fileurl","filename","focus","blur","indexOf","prependTo","click","editItemClick","deleteItemClick","change","unshared","$item_header","parents","remove","saveBlockData","serializeArray","value","showPreloadinator","ajax","url","document","location","href","success","res","parse","resetViewContent","hidePreloadinator","item_id","parent","action","sesskey","showDialog","modalTitle","initContentEdit","strip_tags","DOMParser","parseFromString","textContent","myresume","portfolioDesignBlocks","empty","appendTo","initAddItems","event","$input","target","is","prop","addPersonalInfo","checkFields","Object","fncheckbox","first","undefined","lncheckbox","iframe","iframetextElement","contents","hide","addHeadline","addText","addItem","i","clone","after","addCvInfo","addMedia","width","height","create_as_note","addBadge","ok","forInput","input","show","filterItemsByTag","selectedTag","elementTags","category_id","filterItemsByTitle","selectedIndex","toLowerCase","clearItemFilters","cancelAddEdit","sortable","beforeStop","ui","receive","e","closest","search","type_block","script","createElement","appendChild","on","update","handle","placeholder","forcePlaceholderSize","connectWith","stop","resetElements","draggable","connectToSortable","helper","preventDefault","trigger","content","setTitle","setBody","create","done","modal","element","tohide","fixedposition","now","preloadinatorTemplate","setTimeout","toshow","getRoot","shown","hidden","update_sharing","share_text","$form","ExabisEportfolio","load_grouplist","load_userlist","initialise"],"mappings":"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"}