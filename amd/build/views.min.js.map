{"version":3,"file":"views.min.js","sources":["../src/views.js"],"sourcesContent":["var exaportViewEdit;\r\nvar newItem = null, lastclicked = null;\r\n\r\ndefine(['jquery',\r\n        'jqueryui',\r\n        'block_exaport/touchpunch',\r\n        'core/modal_factory',\r\n        'core/modal_events'],\r\n        function($, jqui, jquitp, modalFactory, modalEvents) {\r\n\r\n    var dialogue;\r\n    var helpDialogue;\r\n    // var last_popup;\r\n\r\n    var defaultModalOptions = {\r\n        title: 'test title',\r\n        body: '',\r\n        footer: '',\r\n        //template: 'SAVE_CANCEL',\r\n        //type: 'SAVE_CANCEL',\r\n    };\r\n\r\n    var exaportViewEditCreate = function() {\r\n\r\n        var viewEdit = {\r\n\r\n            strip_tags: function(text) {\r\n                let tempDoc = new DOMParser().parseFromString(text, 'text/html');\r\n                return tempDoc.body.textContent || \"\";\r\n            },\r\n\r\n            resetViewContent: function(){\r\n                // Load stored blocks.\r\n                var blocks = $('form :input[name=blocks]').val();\r\n                if (blocks) {\r\n                    blocks = JSON.parse(blocks);\r\n                }\r\n                var myresume = $('form :input[name=myresume]').val();\r\n                if (myresume) {\r\n                    myresume = JSON.parse(myresume);\r\n                }\r\n                if (!blocks) {\r\n                    // Start with headline.\r\n                    blocks = [{\r\n                        type: 'headline'\r\n                    }];\r\n                }\r\n                var portfolioDesignBlocks = $('.portfolioDesignBlocks');\r\n                portfolioDesignBlocks.empty();\r\n                $.each(blocks, function(){\r\n                    generateItem('new', this).appendTo(\r\n                        // Wenn vorhanden zur richtigen spalte hinzufügen, sonst immer zur 1ten.\r\n                        (this.positionx && portfolioDesignBlocks[this.positionx - 1]) ? portfolioDesignBlocks[this.positionx - 1] : portfolioDesignBlocks[0]\r\n                    );\r\n                });\r\n                resetElementStates();\r\n                updateBlockData();\r\n            },\r\n\r\n            initAddItems: function(/*title*/){\r\n                $('#add-items-list .add-item').click(function(event){\r\n                    var $input = $(this).find('input');\r\n\r\n                    if (!$(event.target).is(':input')) {\r\n                        // Toggle checkbox (if the user clicked the div and not the checkbox).\r\n                        $input.prop('checked', !$input.prop('checked'));\r\n                    }\r\n\r\n                    if ($input.prop('checked')) {\r\n                        $(this).addClass('checked');\r\n                    } else {\r\n                        $(this).removeClass('checked');\r\n                    }\r\n                });\r\n            },\r\n\r\n            addPersonalInfo: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var data = new Object();\r\n                data.type = 'personal_information';\r\n                data.id = id;\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                // if ($('#firstname').attr('checked') == 'checked') {\r\n                var fncheckbox = $('.pieform input[name=\"fields\\[firstname\\]\"]').first();\r\n                if (fncheckbox !== undefined && fncheckbox.is(':checked')) {\r\n                    data.firstname = fncheckbox.val();\r\n                }\r\n                // if ($('#lastname').attr('checked') == 'checked') {\r\n                var lncheckbox = $('.pieform input[name=\"fields\\[lastname\\]\"]').first();\r\n                if (lncheckbox.is(':checked')) {\r\n                    data.lastname = lncheckbox.val();\r\n                }\r\n                data.picture = $('form input[name=picture]:checked').val();\r\n                data.email = $('form input[name=email]:checked').val();\r\n                // ...data.text = tinyMCE.get('block_intro').getContent();.\r\n                data.text = $('#id_block_intro').val();\r\n                // If it is tinyMCE: use #tinymce.\r\n                if ($('.mceEditor iframe').length) {\r\n                    var iframe = $('.mceEditor iframe');\r\n                    var iframetextElement = $('#tinymce', iframe.contents());\r\n                    if (iframetextElement.length) {\r\n                        data.text = iframetextElement.html();\r\n                    }\r\n                }\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addHeadline: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.text = $('#headline').val();\r\n                data.type = 'headline';\r\n                data.id = id;\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                // ...$E.last_popup.remove();.\r\n                newItem = null;\r\n                dialogue.hide();\r\n                saveBlockData();\r\n            },\r\n\r\n            addText: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.type = 'text';\r\n                data.id = id;\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                // ...data.text = tinymce.get('block_text').getContent();.\r\n                data.text = $('#id_block_text').val();\r\n                // If it is tinyMCE: use #tinymce.\r\n                if ($('.mceEditor iframe').length) {\r\n                    var iframe = $('.mceEditor iframe');\r\n                    var iframetextElement = $('#tinymce', iframe.contents());\r\n                    if (iframetextElement.length) {\r\n                        data.text = iframetextElement.html();\r\n                    }\r\n                }\r\n                // ...data.text = $('#id_text').val();.\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addItem: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                $('#blockform input.add-item-checkbox:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    };\r\n                    data = {};\r\n                    data.type = 'item';\r\n                    data.itemid = $(this).val();\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addCvInfo: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                $('#blockform input.add-cvitem-checkbox:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    }\r\n                    data = {};\r\n                    data.type = 'cv_information';\r\n                    data.itemid = $(this).val();\r\n                    if ($('#blockform [name=\"add_withfiles\"]').is(\":checked\")) {\r\n                        data.resume_withfiles = 1;\r\n                    } else {\r\n                        data.resume_withfiles = 0;\r\n                    }\r\n                    data.resume_itemtype = $(this).attr('data-cvtype');\r\n                    var goalsSkills = ['goalspersonal', 'goalsacademic', 'goalcareers',\r\n                                       'skillspersonal', 'skillsacademic', 'skillscareers'];\r\n                    if (goalsSkills.indexOf(data.resume_itemtype) > -1) {\r\n                        data.itemid = null;\r\n                    }\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addMedia: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                data.type = 'media';\r\n                data.contentmedia = $('#block_media').val();\r\n                data.width = $('#block_width').val();\r\n                data.height = $('#block_height').val();\r\n                data.create_as_note = $('input[name=create_as_note]:checked').length ? 1 : 0;\r\n                data.id = id;\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addBadge: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                $('#blockform input[name=\"add_badges[]\"]:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    };\r\n                    data = {};\r\n                    data.type = 'badge';\r\n                    data.itemid = $(this).val();\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            checkFields: function() {\r\n                var ok = true;\r\n                $('#blockform .not-empty-check').each(function(){\r\n                    var forInput = $(this).attr('for');\r\n                    var input = $('#blockform').find('input[name=\"' + forInput + '\"]');\r\n                    if (input.length == 0) {\r\n                        // Input not found, ignore.\r\n                        $(this).hide();\r\n                        return;\r\n                    }\r\n                    if (input.val().length) {\r\n                        // Has value.\r\n                        $(this).hide();\r\n                        return;\r\n                    }\r\n                    // Show error.\r\n                    $(this).show();\r\n                    input.focus();\r\n                    ok = false;\r\n                    return false;\r\n                });\r\n\r\n                // All checks ok.\r\n                return ok;\r\n            },\r\n\r\n            filterItemsByTag: function() {\r\n                // Clear the search by title.\r\n                $('#filterByTitle').val('');\r\n                $('div.add-item-category').hide();\r\n                $('div.add-item').show();\r\n                $('div.add-item-sub').show();\r\n                $('tr.sharedArtefacts').show();\r\n                var selectedTag = $('.tagfilter').val();\r\n                if (selectedTag != '') {\r\n                    $('div.add-item').each(function() {\r\n                        var elementTags = $(this).data('tags');\r\n                        if (elementTags !== undefined) {\r\n                            if (elementTags.indexOf(selectedTag) == -1) {\r\n                                $(this).hide();\r\n                            }\r\n                        } else {\r\n                            $(this).hide();\r\n                        }\r\n                    });\r\n                } else {\r\n                    $('div.add-item-category, div.add-item-sub').show();\r\n                }\r\n                // Hide category names if it has no visible artefact.\r\n                $('div.add-item-sub').each(function(){\r\n                    if ($(this).find('div.add-item:visible').length == 0) {\r\n                        $(this).hide();\r\n                    }\r\n                });\r\n                $('div.add-item:visible').each(function() {\r\n                    var category_id = $(this).data('category');\r\n                    $('div.add-item-category[data-category=\"' + category_id + '\"]').show();\r\n                });\r\n                // List of shared artefacts.\r\n                if ($('div.add-item[data-category=\"sharedFromUser\"]:visible').length == 0) {\r\n                    $('tr.sharedArtefacts').hide();\r\n                }\r\n            },\r\n\r\n            filterItemsByTitle: function() {\r\n                // Reset filter by tag.\r\n                if ($('.tagfilter').length) {\r\n                    $('.tagfilter')[0].selectedIndex = 0;\r\n                }\r\n                var text = $('#blockform #filterByTitle').val().toLowerCase();\r\n                $('div.add-item-category').hide();\r\n                $('div.add-item').show();\r\n                $('div.add-item-sub').show();\r\n                $('tr.sharedArtefacts').show();\r\n                if (text != '') {\r\n                    $('div.add-item:visible').each(function() {\r\n                        var elementText = $(this).text();\r\n                        if (elementText.toLowerCase().indexOf(text) > -1) {\r\n                            $(this).show();\r\n                        } else {\r\n                            $(this).hide();\r\n                        }\r\n                    });\r\n                } else {\r\n                    $('div.add-item-category, div.add-item-sub').show();\r\n                }\r\n                // Hide category names if it has no visible artefact.\r\n                $('div.add-item-sub').each(function() {\r\n                    if ($(this).find('div.add-item:visible').length == 0) {\r\n                        $(this).hide();\r\n                    }\r\n                });\r\n                $('div.add-item:visible').each(function(){\r\n                    var category_id = $(this).data('category');\r\n                    $('div.add-item-category[data-category=\"' + category_id + '\"]').show();\r\n                });\r\n                // List of shared artefacts.\r\n                if ($('div.add-item[data-category=\"sharedFromUser\"]:visible').length == 0) {\r\n                    $('tr.sharedArtefacts').hide();\r\n                }\r\n            },\r\n\r\n            clearItemFilters: function() {\r\n                if ($('.tagfilter').length) {\r\n                    $('.tagfilter')[0].selectedIndex = 0;\r\n                }\r\n                $('#blockform #filterByTitle').val('');\r\n                exaportViewEdit.filterItemsByTitle();\r\n            },\r\n\r\n            cancelAddEdit: function() {\r\n                dialogue.hide();\r\n                updateBlockData();\r\n            },\r\n\r\n        }\r\n        return viewEdit;\r\n    };\r\n\r\n    function resetElementStates()\r\n    {\r\n        $('.portfolioOptions li').removeClass('selected');\r\n        $('.portfolioDesignBlocks > li').each(function() {\r\n            $('.portfolioOptions li[itemid=' + $(this).data('portfolio').itemid + ']').addClass('selected');\r\n        });\r\n    }\r\n\r\n    function updateBlockData()\r\n    {\r\n        var blocks = [];\r\n        $('.portfolioDesignBlocks').each(function(positionx) {\r\n            // Immediate li children, because content can have li too.\r\n            $(this).children('li:visible').not('.block-placeholder').each(function(positiony) {\r\n                blocks.push($.extend($(this).data('portfolio'), {\r\n                    positionx: positionx + 1,\r\n                    positiony: positiony + 1\r\n                }));\r\n            });\r\n        });\r\n\r\n        var input = $('form :input[name=blocks]');\r\n        input.val(JSON.stringify(blocks));\r\n    }\r\n\r\n    function generateItem(type, data)\r\n    {\r\n        var $item;\r\n        if (type == 'new') {\r\n            $item = $('<li></li>');\r\n            $item.data('portfolio', data);\r\n        } else {\r\n            $item = $(data);\r\n\r\n            data = $item.data('portfolio');\r\n            if (!data) {\r\n                data = {};\r\n                if ($item.attr('itemid')) {\r\n                    data.type = 'item';\r\n                    data.itemid = $item.attr('itemid');\r\n                } else {\r\n                    data.type = $item.attr('block-type');\r\n                    if ($item.attr('text')) {\r\n                        data.text = $item.attr('text');\r\n                    }\r\n                    if ($item.attr('block_title')) {\r\n                        data.block_title = $item.attr('block_title');\r\n                    }\r\n                    if ($item.attr('firstname')) {\r\n                        data.firstname = $item.attr('firstname');\r\n                    }\r\n                    if ($item.attr('lastname')) {\r\n                        data.lastname = $item.attr('lastname');\r\n                    }\r\n                    if ($item.attr('picture')) {\r\n                        data.picture = $item.attr('picture');\r\n                    }\r\n                    if ($item.attr('email')) {\r\n                        data.email = $item.attr('email');\r\n                    }\r\n                }\r\n                // Store data.\r\n                $item.data('portfolio', data);\r\n            }\r\n        }\r\n\r\n        $item.addClass('item');\r\n        $item.css('position', 'relative');\r\n        /*\r\n        Bug, wenn auf relativ setzen\r\n        if ($.browser.msie) {\r\n            $item.css('height', '1%');\r\n        }.\r\n        */\r\n        // var header_content = '';\r\n        var portfolioItems;\r\n        var $E = window.block_exaport;\r\n        if (data.itemid && !data.item && portfolioItems && portfolioItems[data.itemid]) {\r\n            data.item = portfolioItems[data.itemid];\r\n        }\r\n        if (data.type == 'item' && data.itemid && data.item) {\r\n            var item_data = data.item;\r\n            var ilink = item_data.link;\r\n            if (ilink != \"\") {\r\n                ilink = $E.translate('link') + ': ' + ilink + '<br />';\r\n            }\r\n\r\n            var itemPictures = '';\r\n            if (item_data.filescount > 1) {\r\n                var imgWidth = 40;\r\n                if (item_data.filescount > 3) {\r\n                    imgWidth = 35;\r\n                }\r\n                if (item_data.filescount > 5) {\r\n                    imgWidth = 30;\r\n                }\r\n                itemPictures += '<div class=\"pictureset\" style=\"float:right; position: relative; text-align: right; max-width: 150px;\">';\r\n                for (var imi = 0; imi < item_data.filescount; imi++) {\r\n                    if (imi && imi % 5 === 0) {\r\n                        itemPictures += '<br />';\r\n                    }\r\n                    // itemPictures += '<div class=\"picture\" style=\"float:right; position: relative; height: '+imgWidth+'px; width: '+imgWidth+'px;\">';\r\n                    itemPictures += '<div class=\"picture\" style=\"float:right; height: '+imgWidth+'px; width: '+imgWidth+'px;\">';\r\n                    itemPictures += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + M.cfg['wwwroot'] + '/blocks/exaport/item_thumb.php?item_id=' + item_data.id + '&imindex='+imi+'\">';\r\n                    itemPictures += '</div>';\r\n                }\r\n                itemPictures += '</div>';\r\n            } else {\r\n                itemPictures += '<div class=\"picture\" style=\"float:right; position: relative; height: 100px; width: 100px;\">';\r\n                itemPictures += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + M.cfg['wwwroot'] + '/blocks/exaport/item_thumb.php?item_id=' + item_data.id + '\">';\r\n                itemPictures += '</div>';\r\n            }\r\n\r\n            var tempString = '';\r\n            tempString += '<div id=\"id_holder\" style=\"display:none;\"></div> ';\r\n            tempString += '<div class=\"item_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('viewitem') + ': ' + item_data.name + '</div>';\r\n            tempString += itemPictures;\r\n            tempString += '<div class=\"body\">' + $E.translate('type') + ': ' + $E.translate(item_data.type) + '<br />';\r\n            tempString += $E.translate('category') + ': ' + item_data.category + '<br />' + ilink;\r\n            tempString += $E.translate('comments') + ': ' + item_data.comments + '<div class=\"exaport-item-intro\"></div>';\r\n            if (item_data.competences) {\r\n                tempString += '<script type=\"text/javascript\" src=\"javascript/wz_tooltip.js\"></script><a onmouseover=\"Tip(\\'' + item_data.competences + '\\')\" onmouseout=\"UnTip()\"><img src=\"' + M.cfg['wwwroot'] + '/pix/t/grades.png\" class=\"iconsmall\" alt=\"' + 'competences' + '\" /></a>';\r\n            }\r\n            tempString += '</div></div>';\r\n            $item.html(tempString);\r\n            if (!item_data.competences) {\r\n                // User html may be malformed, so savely inject it here.\r\n                $item.find('.exaport-item-intro').html(item_data.intro);\r\n            }\r\n        } else if (data.type == 'personal_information') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"personal_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('personalinformation') + ': </div>';\r\n            tempString += '<div class=\"picture\" style=\"float:right; position: relative;\"></div>';\r\n            tempString += '<div class=\"name\"></div>';\r\n            tempString += '<div class=\"email\"></div>';\r\n            tempString += '<div class=\"body\"></div>';\r\n            tempString += '</div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append(data.block_title);\r\n            if (data.picture != '' && data.picture != null) {\r\n                $item.find('div.picture').append('<img src=\"' + data.picture + '\">');\r\n            }\r\n            $item.find('div.name').append(data.firstname); $item.find('div.name').append(' ');\r\n            $item.find('div.name').append(data.lastname);\r\n            $item.find('div.email').append(data.email);\r\n            $item.find('div.body').append(data.print_text);\r\n        } else if (data.type == 'headline') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\">' + $E.translate('view_specialitem_headline') + '<div class=\"body\"></div></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.body').append(data.print_text);\r\n        } else if (data.type == 'media') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\"></div><div class=\"body\"></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append($E.translate('view_specialitem_media') + ($.trim(data.block_title).length ? ': ' + data.block_title : ''));\r\n            $item.find('div.body').append(data.contentmedia);\r\n        } else if (data.type == 'badge') {\r\n            if (typeof data.badge == 'undefined') {\r\n                $item.html('loading');\r\n            } else {\r\n                var badge = data.badge;\r\n                var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n                tempString += '<div class=\"item_info\" style=\"overflow: hidden;\">';\r\n                tempString += '<div class=\"header\">' + $E.translate('view_specialitem_badge') + ': ' + badge.name + '</div>';\r\n                tempString += '<div class=\"picture\" style=\"float:right; position: relative; height: 100px; width: 100px;\">';\r\n                tempString += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + badge.imageUrl + '\">';\r\n                tempString += '</div>';\r\n                tempString += '<div class=\"body\">' + badge.description + '</div>';\r\n                                    /* +\r\n                                    '</div>' +\r\n                                    '<div class=\"body\">'+$E.translate('type')+': '+$E.translate(item_data.type)+'<br />' +\r\n                                    $E.translate('category')+': '+item_data.category+'<br />' + ilink +\r\n                                    $E.translate('comments')+': '+item_data.comments+'<br />' + item_data.intro +\r\n                                    '</div>\r\n                                    */\r\n                $item.html(tempString);\r\n            }\r\n        } else if (data.type == 'cv_information') {\r\n            data.item = null;\r\n            var body_content = '';\r\n            // var titleContent = '';\r\n            // var resumeItems;\r\n            var addToHeader = '';\r\n            var attachments = [];\r\n            switch (data.resume_itemtype) {\r\n                case 'cover':\r\n                    if (resumeItems && resumeItems.cover) {\r\n                        body_content = resumeItems.cover;\r\n                    }\r\n                    break;\r\n                case 'edu':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_education_history');\r\n                    if (data.itemid && resumeItems && resumeItems.educations[data.itemid]) {\r\n                        item_data = resumeItems.educations[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"edu_institution\">' + item_data.institution + ':</span> ';\r\n                        description += '<span class=\"edu_qualname\">' + item_data.qualname + '</span>';\r\n                        if (item_data.startdate != '' || item_data.enddate != '') {\r\n                            description += ' (';\r\n                            if (item_data.startdate != '') {\r\n                                description += '<span class=\"edu_startdate\">' + item_data.startdate + '</span>';\r\n                            }\r\n                            if (item_data.enddate != '') {\r\n                                description += '<span class=\"edu_enddate\"> - ' + item_data.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (item_data.qualdescription != '') {\r\n                            description += '<span class=\"edu_qualdescription\">' + item_data.qualdescription + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'employ':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_employment_history');\r\n                    if (data.itemid && resumeItems && resumeItems.employments[data.itemid]) {\r\n                        item_data = resumeItems.employments[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"employ_jobtitle\">' + item_data.jobtitle + ':</span> ';\r\n                        description += '<span class=\"employ_employer\">' + item_data.employer + '</span>';\r\n                        if (item_data.startdate != '' || item_data.enddate != '') {\r\n                            description += ' (';\r\n                            if (item_data.startdate != '') {\r\n                                description += '<span class=\"employ_startdate\">' + item_data.startdate + '</span>';\r\n                            }\r\n                            if (item_data.enddate != '') {\r\n                                description += '<span class=\"employ_enddate\"> - ' + item_data.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (item_data.positiondescription != '') {\r\n                            description += '<span class=\"employ_positiondescription\">' + item_data.positiondescription + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'certif':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_certif');\r\n                    if (data.itemid && resumeItems && resumeItems.certifications[data.itemid]) {\r\n                        item_data = resumeItems.certifications[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"certif_title\">' + item_data.title + '</span> ';\r\n                        if (item_data.date != '') {\r\n                            description += '<span class=\"certif_date\">(' + item_data.date + ')</span>';\r\n                        }\r\n                        if (item_data.description != '') {\r\n                            description += '<span class=\"certif_description\">' + item_data.description + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'public':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_public');\r\n                    if (data.itemid && resumeItems && resumeItems.publications[data.itemid]) {\r\n                        item_data = resumeItems.publications[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"public_title\">' + item_data.title;\r\n                        if (item_data.contribution != '') {\r\n                            description += ' (' + item_data.contribution + ')';\r\n                        }\r\n                        description += '</span> ';\r\n                        if (item_data.date != '') {\r\n                            description += '<span class=\"public_date\">(' + item_data.date + ')</span>';\r\n                        }\r\n                        if (item_data.contributiondetails != '' || item_data.url != '') {\r\n                            description += '<span class=\"public_description\">';\r\n                            if (item_data.contributiondetails != '') {\r\n                                description += item_data.contributiondetails;\r\n                            }\r\n                            if (item_data.url != '') {\r\n                                description += '<br /><a href=\"' + item_data.url + '\" class=\"public_url\" target=\"_blank\">' + item_data.url + '</a>';\r\n                            }\r\n                            description += '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'mbrship':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_mbrship');\r\n                    if (data.itemid && resumeItems && resumeItems.profmembershipments[data.itemid]) {\r\n                        item_data = resumeItems.profmembershipments[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"mbrship_title\">' + item_data.title + '</span> ';\r\n                        if (item_data.startdate != '' || item_data.enddate != '') {\r\n                            description += ' (';\r\n                            if (item_data.startdate != '') {\r\n                                description += '<span class=\"mbrship_startdate\">' + item_data.startdate + '</span>';\r\n                            }\r\n                            if (item_data.enddate != '') {\r\n                                description += '<span class=\"mbrship_enddate\"> - ' + item_data.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (item_data.description != '') {\r\n                            description += '<span class=\"mbrship_description\">' + item_data.description + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'goalspersonal':\r\n                case 'goalsacademic':\r\n                case 'goalscareers':\r\n                case 'skillspersonal':\r\n                case 'skillsacademic':\r\n                case 'skillscareers':\r\n                    attachments = resumeItems[data.resume_itemtype + '_attachments'];\r\n                    // console.log(resumeItems);\r\n                    // console.log(data.resume_itemtype + '_attachments');\r\n                    addToHeader = $E.translate('resume_' + data.resume_itemtype);\r\n                    var description = '';\r\n                    if (resumeItems['' + data.resume_itemtype]) {\r\n                        description += '<span class=\"' + data.resume_itemtype + '_text\">' + resumeItems['' + data.resume_itemtype] + '</span> ';\r\n                    }\r\n                    body_content = description;\r\n                    break;\r\n                case 'interests':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_interests');\r\n                    var description = '';\r\n                    if (resumeItems.interests != '') {\r\n                        description += '<span class=\"interests\">' + resumeItems.interests + '</span> ';\r\n                    }\r\n                    body_content = description;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (data.resume_withfiles == \"1\" && attachments && attachments.length) {\r\n                body_content += '<ul class=\"resume_attachments ' + data.resume_itemtype + '_attachments\">';\r\n                $.each(attachments, function (k, file) {\r\n                    body_content += '<li><a href=\"' + file.fileurl + '\" target=\"_blank\">' + file.filename + '</a></li>';\r\n                });\r\n                body_content += '</ul>';\r\n            }\r\n\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"cv_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('cvinformation') + ': ' + addToHeader + '</div>';\r\n            tempString += '<div class=\"body\">' + body_content + '</div>';\r\n            tempString += '</div>';\r\n            $item.html(tempString);\r\n        } else {\r\n            data.type = 'text';\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\"></div>';\r\n            tempString += '<div class=\"body\"><p class=\"text\" ' + $E.translate('view_specialitem_text_defaulttext') + '\"></p></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append($E.translate('view_specialitem_text') + ($.trim(data.block_title).length ? ': ' + data.block_title : ''));\r\n            $item.find('div.body').append(data.print_text);\r\n        }\r\n\r\n        // Insert default texts.\r\n        $item.find(':input[default-text]').focus(function(){\r\n            $(this).removeClass('default-text');\r\n            if ($(this).attr('default-text') == $(this).val()) {\r\n                $(this).val('');\r\n            }\r\n        }).blur(function(){\r\n            if (!$.trim($(this).val())) {\r\n                $(this).addClass('default-text');\r\n                $(this).val($(this).attr('default-text'));\r\n            }\r\n        }).blur();\r\n        $item.find('div#id_holder').append(data.id);\r\n\r\n        if (type == 'new') {\r\n            // No edit button for items, badges and resume items.\r\n            var typesWithoutEditButton = ['item', 'badge', 'cv_information'];\r\n            // if ((data.type != 'item') && (data.type != 'badge')) {\r\n            if (!(typesWithoutEditButton.indexOf(data.type) > -1)) {\r\n                $('<a class=\"edit\" title=\"Edit\"><span>Edit</span></a>').prependTo($item).click(editItemClick);\r\n            }\r\n        }\r\n        else {\r\n            $item.append('<a class=\"unsaved\" title=\"This block was not saved\"><span>Unsaved</span></a>');\r\n        }\r\n        $('<a class=\"delete\" title=\"' + $E.translate('delete') + '\"><span>' + $E.translate('delete') + '</span></a>').prependTo($item).click(deleteItemClick);\r\n        $item.find(':input').change(function() {\r\n            $item.data('portfolio').text = $(this).val();\r\n        });\r\n        updateBlockData();\r\n        // Unshared blocks.\r\n        if (data.unshared == 1) {\r\n            $item.find('div.item_info').addClass('unshared_block');\r\n            $item_header = $item.find('div.header').html();\r\n            $item.find('div.header').html($item_header + '<span class=\"unshared_message\">Unshared</span>');\r\n        }\r\n        return $item;\r\n    }\r\n\r\n    // Click on 'delete' block.\r\n    function deleteItemClick()\r\n    {\r\n        $(this).parents('.item').remove();\r\n        resetElementStates();\r\n        updateBlockData();\r\n    }\r\n\r\n    function saveBlockData() {\r\n        var data = $('form#view_edit_form').serializeArray();\r\n        data.push({name: 'ajax', value: 1});\r\n        showPreloadinator($('#view-preview'), '', true);\r\n        $.ajax({\r\n            url: document.location.href,\r\n            type: 'POST',\r\n            data: data,\r\n            success: function(res) {\r\n                var data = JSON.parse(res);\r\n                $('form :input[name=blocks]').val(data.blocks);\r\n                exaportViewEdit.resetViewContent();\r\n                hidePreloadinator($('#view-preview'), '');\r\n            }\r\n        });\r\n    }\r\n\r\n    function editItemClick()\r\n    {\r\n        var item_id = $(this).parent().find(\"#id_holder\").html();\r\n        lastclicked = $(this).parent();\r\n        showPreloadinator(lastclicked, '', false);\r\n        $.ajax({\r\n            url: M.cfg['wwwroot'] + '/blocks/exaport/blocks.json.php',\r\n            type: 'POST',\r\n            data: {\r\n                item_id: item_id,\r\n                action: 'edit',\r\n                'viewid': $('form :input[name=viewid]').val(),\r\n                'text[itemid]': $('form :input[name=draft_itemid]').val(),\r\n                sesskey: $('form :input[name=sesskey]').val()\r\n            },\r\n            success: function(res) {\r\n                var data = JSON.parse(res);\r\n\r\n                showDialog(data.modalTitle, data.html);\r\n                // Focus first element.\r\n                // ...popup.$body.find('input:visible:first').focus();.\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    // Main function -> will be started on page load.\r\n    var initContentEdit = function() {\r\n\r\n        exaportViewEdit = exaportViewEditCreate();\r\n        exaportViewEdit.resetViewContent();\r\n\r\n        $(\".portfolioDesignBlocks\").sortable({\r\n            beforeStop: function (event, ui) {\r\n                newItem = ui.item;\r\n            },\r\n            receive: function(e, ui){\r\n\r\n                console.log('start to modal!');\r\n\r\n                // Get ajax only for item from the top block.\r\n                var uiattr = $(ui.item[0]).closest('ul').prop(\"className\");\r\n                if (uiattr.search(\"portfolioDesignBlocks\") == -1) {\r\n                    $.ajax({\r\n                        url: M.cfg['wwwroot'] + '/blocks/exaport/blocks.json.php',\r\n                        type: 'POST',\r\n                        data: {\r\n                            type_block: ui.item.attr('block-type'),\r\n                            action: 'add',\r\n                            'viewid': $('form :input[name=viewid]').val(),\r\n                            'text[itemid]': $('form :input[name=draft_itemid]').val(),\r\n                            sesskey: $('form :input[name=sesskey]').val()\r\n                        },\r\n                        success: function(res) {\r\n                            var data = JSON.parse (res);\r\n\r\n                            showDialog(data.modalTitle, data.html);\r\n\r\n                            // ...var popup = $E.popup({ body_content: data.html, onhide: function(){\r\n                            // if (newItem) $(newItem).remove();\r\n                            // } });\r\n                            // focus first element\r\n                            // $E.last_popup.$body.find('input:visible:first').focus();.\r\n\r\n                            // Create a <script> tag from result.\r\n                            $('#temp_javascript').remove();\r\n                            var script = document.createElement('script');\r\n                            $(script).attr('id', 'temp_javascript');\r\n                            // console.log(data.script);\r\n                            script.textContent = data.script;\r\n                            document.body.appendChild(script);\r\n\r\n                            $('body').on('change keydown paste input', '#filterByTitle', exaportViewEdit.filterItemsByTitle);\r\n                        }\r\n                    });\r\n                    updateBlockData();\r\n                }\r\n            },\r\n            update: function(e, ui) {\r\n                updateBlockData();\r\n            },\r\n            handle: '.header',\r\n            placeholder: \"block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            connectWith: ['.portfolioDesignBlocks'],\r\n        });\r\n        $(\".portfolioOptions\").sortable({\r\n            connectWith: ['.portfolioDesignBlocks'],\r\n            placeholder: \"block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            stop: function(e, ui) {\r\n                // Listenelemente zurücksetzen.\r\n                resetElements();\r\n            }\r\n            /*\r\n            remove: function(e, ui){\r\n                console.log(ui);\r\n                console.log(ui.element.html());\r\n                // ui.item.after(ui.placeholder.clone().css('visibility', ''));\r\n                console.log('remove');\r\n            }\r\n            */\r\n        });\r\n        $(\".portfolioElement\").draggable({\r\n            connectToSortable: '.portfolioDesignBlocks',\r\n            placeholder: \".block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            helper: \"clone\",\r\n            stop: function(e, ui){\r\n                showPreloadinator($(ui.helper), '', false);\r\n            }\r\n        });\r\n        $('body').on('click', '[data-toggle=\"gtn-help-modal\"]', function(e) {\r\n            e.preventDefault();\r\n            var trigger = $(this);\r\n            var title = $(this).attr('data-title');\r\n            var content = $(this).attr('data-content');\r\n            if (helpDialogue) {\r\n                helpDialogue.setTitle(title);\r\n                helpDialogue.setBody(content);\r\n                helpDialogue.show();\r\n            } else {\r\n                modalFactory.create({\r\n                    title: title,\r\n                    body: content,\r\n                    footer: '',\r\n                }, trigger).done(function (modal) {\r\n                    helpDialogue = modal;\r\n                    helpDialogue.setTitle(title);\r\n                    helpDialogue.setBody(content);\r\n                    // Display the dialogue.\r\n                    helpDialogue.show();\r\n                });\r\n            }\r\n        });\r\n\r\n\r\n    } // End initContentEdit.\r\n\r\n    function showPreloadinator(element, tohide, fixedposition) {\r\n        var id = 'preloader' + $.now();\r\n        var preloadinatorTemplate = '<div id=\"' + id + '\" class=\"preloader ' + (fixedposition ? 'preloader-fixed' : '') + ' js-preloader flex-center\">' +\r\n                '<div class=\"dots\">'+\r\n                    '<div class=\"dot\"></div>'+\r\n                    '<div class=\"dot\"></div>'+\r\n                    '<div class=\"dot\"></div>'+\r\n                '</div>'+\r\n            '</div>';\r\n        if (tohide != '') {\r\n            element.find(tohide).hide();\r\n        }\r\n        element.append(preloadinatorTemplate);\r\n        // hide element on very long requests\r\n        setTimeout('$(\\'#' + id + '\\').remove();', 15000); // 15 seconds\r\n\r\n    } // End showPreloadinator\r\n\r\n    function hidePreloadinator(element, toshow) {\r\n        if (toshow != '') {\r\n            $(element).find('.blocktype').show();\r\n        }\r\n        $(element).find('.preloader').remove();\r\n    } // End hidePreloadinator\r\n\r\n    function showDialog(title, body) {\r\n        if (dialogue) {\r\n            dialogue.setTitle(title);\r\n            dialogue.setBody(body);\r\n            // Display the dialogue.\r\n            dialogue.show();\r\n        } else {\r\n            modalFactory.create(defaultModalOptions).done(function (modal) {\r\n                dialogue = modal;\r\n                dialogue.setTitle(title);\r\n                dialogue.setBody(body);\r\n                // Display the dialogue.\r\n                dialogue.show();\r\n                // On show handler\r\n                /*dialogue.getRoot().on(modalEvents.shown, function () {\r\n                    console.log('modal is shown');\r\n                    console.log(data);\r\n                    dialogue.setTitle(data.modalTitle);\r\n                    dialogue.setBody(data.html);\r\n                });*/\r\n                // On show handler. (for slow requests)\r\n                dialogue.getRoot().on(modalEvents.shown, function () {\r\n                    hidePreloadinator(newItem, '.blocktype');\r\n                    hidePreloadinator(lastclicked, '');\r\n                    // console.log('modal is shown');\r\n                });\r\n                // On hide handler.\r\n                dialogue.getRoot().on(modalEvents.hidden, function () {\r\n                    // Empty modal contents when it's hidden.\r\n                    // console.log('modal is hidden');\r\n                    dialogue.setBody('');\r\n                    // Hide handler.\r\n                    if (newItem) {\r\n                        $(newItem).remove();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    // Sharing.\r\n    function update_sharing()\r\n    {\r\n        var share_text = '';\r\n        var $form = $('#exaport-view-mod');\r\n\r\n        if ($form.find(':input[name=externaccess]').is(':checked')) {\r\n            share_text += $E.translate('externalaccess') + ' ';\r\n            $('#externaccess-settings').show();\r\n        } else {\r\n            $('#externaccess-settings').hide();\r\n        }\r\n\r\n        if ($form.find(':input[name=internaccess]').is(':checked')) {\r\n            $('#internaccess-settings').show();\r\n            $('#internaccess-groups').hide();\r\n            if (share_text) {\r\n                share_text += ' ' + $E.translate('viewand') + ' ';\r\n            }\r\n            share_text += $E.translate('internalaccess') + ': ';\r\n\r\n            if ($form.find(':input[name=shareall]:checked').val() == 1) {\r\n                share_text += $E.translate('internalaccessall');\r\n                $('#internaccess-users').hide();\r\n                $('#internaccess-groups').hide();\r\n            } else if ($form.find(':input[name=shareall]:checked').val() == 2) {\r\n                share_text += $E.translate('internalaccessgroups');\r\n                $('#internaccess-users').hide();\r\n                $('#internaccess-groups').show();\r\n                ExabisEportfolio.load_grouplist('views_mod');\r\n            } else {\r\n                share_text += $E.translate('internalaccessusers');\r\n                $('#internaccess-groups').hide();\r\n                $('#internaccess-users').show();\r\n                ExabisEportfolio.load_userlist('views_mod');\r\n            }\r\n        } else {\r\n            $('#internaccess-settings').hide();\r\n        }\r\n\r\n        if ($form.find(':input[name=sharedemails]').is(':checked')) {\r\n            if (share_text) {\r\n                share_text += ' ' + $E.translate('viewand') + ' ';\r\n            };\r\n            share_text += $E.translate('emailaccess') + ' ';\r\n            $('#emailaccess-settings').show();\r\n        } else {\r\n            $('#emailaccess-settings').hide();\r\n        };\r\n\r\n        if (!share_text) {\r\n            share_text = $E.translate('view_sharing_noaccess');\r\n        }\r\n        $('#view-share-text').html(share_text);\r\n    }\r\n\r\n    /*var initialise = function($params) {\r\n            console.log('exaport AMD loaded');\r\n            initContentEdit();\r\n            // for sharing of views\r\n            // changing the checkboxes / radiobuttons update the sharing text, visible options, etc.\r\n            $('.view-sharing input[type=checkbox], .view-sharing input[type=radio]').click(update_sharing);\r\n            update_sharing();\r\n        };\r\n        return initialise();.\r\n    */\r\n\r\n    // MAIN code of MODULE.\r\n    return {\r\n        initialise: function (/*$params*/) {\r\n            // console.log('exaport AMD loaded');\r\n            initContentEdit();\r\n            // For sharing of views\r\n            // changing the checkboxes / radiobuttons update the sharing text, visible options, etc.\r\n            $('.view-sharing input[type=checkbox], .view-sharing input[type=radio]').click(update_sharing);\r\n            update_sharing();\r\n        },\r\n    };\r\n\r\n});\r\n"],"names":["exaportViewEdit","newItem","lastclicked","define","$","jqui","jquitp","modalFactory","modalEvents","dialogue","helpDialogue","defaultModalOptions","title","body","footer","resetElementStates","removeClass","each","this","data","itemid","addClass","updateBlockData","blocks","positionx","children","not","positiony","push","extend","val","JSON","stringify","generateItem","type","$item","attr","text","block_title","firstname","lastname","picture","email","css","$E","window","block_exaport","item","item_data","ilink","link","translate","itemPictures","filescount","imgWidth","imi","M","cfg","id","tempString","name","category","comments","competences","html","find","intro","append","print_text","trim","length","contentmedia","badge","imageUrl","description","body_content","addToHeader","attachments","resume_itemtype","resumeItems","cover","educations","institution","qualname","startdate","enddate","qualdescription","employments","jobtitle","employer","positiondescription","certifications","date","publications","contribution","contributiondetails","url","profmembershipments","interests","resume_withfiles","k","file","fileurl","filename","focus","blur","indexOf","prependTo","click","editItemClick","deleteItemClick","change","unshared","$item_header","parents","remove","saveBlockData","serializeArray","value","showPreloadinator","ajax","document","location","href","success","res","parse","resetViewContent","hidePreloadinator","item_id","parent","action","sesskey","showDialog","modalTitle","initContentEdit","strip_tags","DOMParser","parseFromString","textContent","myresume","portfolioDesignBlocks","empty","appendTo","initAddItems","event","$input","target","is","prop","addPersonalInfo","checkFields","Object","fncheckbox","first","undefined","lncheckbox","iframe","iframetextElement","contents","hide","addHeadline","addText","addItem","i","clone","after","addCvInfo","addMedia","width","height","create_as_note","addBadge","ok","forInput","input","show","filterItemsByTag","selectedTag","elementTags","category_id","filterItemsByTitle","selectedIndex","toLowerCase","clearItemFilters","cancelAddEdit","sortable","beforeStop","ui","receive","e","console","log","closest","search","type_block","script","createElement","appendChild","on","update","handle","placeholder","forcePlaceholderSize","connectWith","stop","resetElements","draggable","connectToSortable","helper","preventDefault","trigger","content","setTitle","setBody","create","done","modal","element","tohide","fixedposition","now","preloadinatorTemplate","setTimeout","toshow","getRoot","shown","hidden","update_sharing","share_text","$form","ExabisEportfolio","load_grouplist","load_userlist","initialise"],"mappings":"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"}