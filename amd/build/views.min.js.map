{"version":3,"sources":["../src/views.js"],"names":["exaportViewEdit","newItem","lastclicked","define","$","json","jqui","jquitp","modalFactory","modalEvents","dialogue","helpDialogue","defaultModalOptions","title","body","footer","exaportViewEditCreate","strip_tags","text","tempDoc","DOMParser","parseFromString","textContent","resetViewContent","blocks","val","parseJSON","myresume","type","portfolioDesignBlocks","empty","each","generateItem","appendTo","positionx","resetElementStates","updateBlockData","initAddItems","click","event","$input","find","target","is","prop","addClass","removeClass","addPersonalInfo","id","checkFields","data","block_title","fncheckbox","first","firstname","lncheckbox","lastname","picture","email","length","iframe","iframetextElement","contents","html","hide","saveBlockData","addHeadline","addText","addItem","i","clone","after","itemid","addCvInfo","resume_withfiles","resume_itemtype","attr","indexOf","addMedia","contentmedia","width","height","create_as_note","addBadge","ok","forInput","input","show","focus","filterItemsByTag","selectedTag","elementTags","categoryId","filterItemsByTitle","selectedIndex","toLowerCase","elementText","clearItemFilters","cancelAddEdit","children","not","positiony","push","extend","toJSON","$item","css","item","portfolioItems","itemData","ilink","link","$E","translate","itemPictures","filescount","imgWidth","imi","M","cfg","tempString","name","category","comments","competences","intro","append","print_text","trim","badge","imageUrl","description","bodyContent","addToHeader","attachments","resumeItems","educations","institution","qualname","startdate","enddate","qualdescription","employments","jobtitle","employer","positiondescription","certifications","date","publications","contribution","contributiondetails","url","profmembershipments","console","log","interests","k","file","fileurl","filename","blur","prependTo","editItemClick","deleteItemClick","change","unshared","$item_header","parents","remove","serializeArray","value","showPreloadinator","ajax","document","location","href","success","res","JSON","parse","hidePreloadinator","item_id","parent","action","sesskey","showDialog","modalTitle","initContentEdit","sortable","beforeStop","ui","receive","e","uiattr","closest","search","type_block","script","createElement","appendChild","on","update","handle","placeholder","forcePlaceholderSize","connectWith","stop","resetElements","draggable","connectToSortable","helper","preventDefault","trigger","content","setTitle","setBody","create","done","modal","element","tohide","fixedposition","now","preloadinatorTemplate","setTimeout","toshow","getRoot","shown","hidden","update_sharing","share_text","$form","ExabisEportfolio","load_grouplist","load_userlist","initialise"],"mappings":"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","sourcesContent":["var exaportViewEdit;\r\nvar newItem = null, lastclicked = null;\r\n\r\ndefine(['jquery',\r\n        'block_exaport/jquery-json',\r\n        'jqueryui',\r\n        'block_exaport/touchpunch',\r\n        'core/modal_factory',\r\n        'core/modal_events'],\r\n        function($, json, jqui, jquitp, modalFactory, modalEvents) {\r\n\r\n    var dialogue;\r\n    var helpDialogue;\r\n    var last_popup;\r\n\r\n    var defaultModalOptions = {\r\n        title: 'test title',\r\n        body: '',\r\n        footer: '',\r\n        //template: 'SAVE_CANCEL',\r\n        //type: 'SAVE_CANCEL',\r\n    };\r\n\r\n    var exaportViewEditCreate = function() {\r\n\r\n        var viewEdit = {\r\n\r\n            strip_tags: function(text) {\r\n                let tempDoc = new DOMParser().parseFromString(text, 'text/html');\r\n                return tempDoc.body.textContent || \"\";\r\n            },\r\n\r\n            resetViewContent: function(){\r\n                // Load stored blocks.\r\n                var blocks = $('form :input[name=blocks]').val();\r\n                if (blocks) {\r\n                    blocks = $.parseJSON(blocks);\r\n                }\r\n                var myresume = $('form :input[name=myresume]').val();\r\n                if (myresume) {\r\n                    myresume = $.parseJSON(myresume);\r\n                }\r\n                if (!blocks) {\r\n                    // Start with headline.\r\n                    blocks = [{\r\n                        type: 'headline'\r\n                    }];\r\n                }\r\n                var portfolioDesignBlocks = $('.portfolioDesignBlocks');\r\n                portfolioDesignBlocks.empty();\r\n                $.each(blocks, function(){\r\n                    generateItem('new', this).appendTo(\r\n                        // Wenn vorhanden zur richtigen spalte hinzufügen, sonst immer zur 1ten.\r\n                        (this.positionx && portfolioDesignBlocks[this.positionx - 1]) ? portfolioDesignBlocks[this.positionx - 1] : portfolioDesignBlocks[0]\r\n                    );\r\n                });\r\n                resetElementStates();\r\n                updateBlockData();\r\n            },\r\n\r\n            initAddItems: function(title){\r\n                $('#add-items-list .add-item').click(function(event){\r\n                    var $input = $(this).find('input');\r\n\r\n                    if (!$(event.target).is(':input')) {\r\n                        // Toggle checkbox (if the user clicked the div and not the checkbox).\r\n                        $input.prop('checked', !$input.prop('checked'));\r\n                    }\r\n\r\n                    if ($input.prop('checked')) {\r\n                        $(this).addClass('checked');\r\n                    } else {\r\n                        $(this).removeClass('checked');\r\n                    }\r\n                });\r\n            },\r\n\r\n            addPersonalInfo: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var data = {};\r\n                data.type = 'personal_information';\r\n                data.id = id;\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                // if ($('#firstname').attr('checked') == 'checked') {\r\n                var fncheckbox = $('.pieform input[name=\"fields\\[firstname\\]\"]').first();\r\n                if (fncheckbox !== undefined && fncheckbox.is(':checked')) {\r\n                    data.firstname = fncheckbox.val();\r\n                }\r\n                // if ($('#lastname').attr('checked') == 'checked') {\r\n                var lncheckbox = $('.pieform input[name=\"fields\\[lastname\\]\"]').first();\r\n                if (lncheckbox.is(':checked')) {\r\n                    data.lastname = lncheckbox.val();\r\n                }\r\n                data.picture = $('form input[name=picture]:checked').val();\r\n                data.email = $('form input[name=email]:checked').val();\r\n                // ...data.text = tinyMCE.get('block_intro').getContent();.\r\n                data.text = $('#id_block_intro').val();\r\n                // If it is tinyMCE: use #tinymce.\r\n                if ($('.mceEditor iframe').length) {\r\n                    var iframe = $('.mceEditor iframe');\r\n                    var iframetextElement = $('#tinymce', iframe.contents());\r\n                    if (iframetextElement.length) {\r\n                        data.text = iframetextElement.html();\r\n                    }\r\n                }\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addHeadline: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.text = $('#headline').val();\r\n                data.type = 'headline';\r\n                data.id = id;\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                // ...$E.last_popup.remove();.\r\n                newItem = null;\r\n                dialogue.hide();\r\n                saveBlockData();\r\n            },\r\n\r\n            addText: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.type = 'text';\r\n                data.id = id;\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                // ...data.text = tinymce.get('block_text').getContent();.\r\n                data.text = $('#id_block_text').val();\r\n                // If it is tinyMCE: use #tinymce.\r\n                if ($('.mceEditor iframe').length) {\r\n                    var iframe = $('.mceEditor iframe');\r\n                    var iframetextElement = $('#tinymce', iframe.contents());\r\n                    if (iframetextElement.length) {\r\n                        data.text = iframetextElement.html();\r\n                    }\r\n                }\r\n                // ...data.text = $('#id_text').val();.\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addItem: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                $('#blockform input.add-item-checkbox:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    };\r\n                    data = {};\r\n                    data.type = 'item';\r\n                    data.itemid = $(this).val();\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addCvInfo: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                $('#blockform input.add-cvitem-checkbox:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    }\r\n                    data = {};\r\n                    data.type = 'cv_information';\r\n                    data.itemid = $(this).val();\r\n                    if ($('#blockform [name=\"add_withfiles\"]').is(\":checked\")) {\r\n                        data.resume_withfiles = 1;\r\n                    } else {\r\n                        data.resume_withfiles = 0;\r\n                    }\r\n                    data.resume_itemtype = $(this).attr('data-cvtype');\r\n                    var goalsSkills = ['goalspersonal', 'goalsacademic', 'goalcareers',\r\n                                       'skillspersonal', 'skillsacademic', 'skillscareers'];\r\n                    if (goalsSkills.indexOf(data.resume_itemtype) > -1) {\r\n                        data.itemid = null;\r\n                    }\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addMedia: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                data.type = 'media';\r\n                data.contentmedia = $('#block_media').val();\r\n                data.width = $('#block_width').val();\r\n                data.height = $('#block_height').val();\r\n                data.create_as_note = $('input[name=create_as_note]:checked').length ? 1 : 0;\r\n                data.id = id;\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addBadge: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                $('#blockform input[name=\"add_badges[]\"]:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    };\r\n                    data = {};\r\n                    data.type = 'badge';\r\n                    data.itemid = $(this).val();\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            checkFields: function() {\r\n                var ok = true;\r\n                $('#blockform .not-empty-check').each(function(){\r\n                    var forInput = $(this).attr('for');\r\n                    var input = $('#blockform').find('input[name=\"' + forInput + '\"]');\r\n                    if (input.length == 0) {\r\n                        // Input not found, ignore.\r\n                        $(this).hide();\r\n                        return;\r\n                    }\r\n                    if (input.val().length) {\r\n                        // Has value.\r\n                        $(this).hide();\r\n                        return;\r\n                    }\r\n                    // Show error.\r\n                    $(this).show();\r\n                    input.focus();\r\n                    ok = false;\r\n                    return false;\r\n                });\r\n\r\n                // All checks ok.\r\n                return ok;\r\n            },\r\n\r\n            filterItemsByTag: function() {\r\n                // Clear the search by title.\r\n                $('#filterByTitle').val('')\r\n                $('div.add-item-category').hide();\r\n                $('div.add-item').show();\r\n                $('div.add-item-sub').show();\r\n                $('tr.sharedArtefacts').show();\r\n                var selectedTag = $('.tagfilter').val();\r\n                if (selectedTag != '') {\r\n                    $('div.add-item').each(function() {\r\n                        var elementTags = $(this).data('tags');\r\n                        if (elementTags !== undefined) {\r\n                            if (elementTags.indexOf(selectedTag) == -1) {\r\n                                $(this).hide();\r\n                            }\r\n                        } else {\r\n                            $(this).hide();\r\n                        };\r\n                    });\r\n                } else {\r\n                    $('div.add-item-category, div.add-item-sub').show();\r\n                };\r\n                // Hide category names if it has no visible artefact.\r\n                $('div.add-item-sub').each(function(){\r\n                    if ($(this).find('div.add-item:visible').length == 0) {\r\n                        $(this).hide();\r\n                    };\r\n                });\r\n                $('div.add-item:visible').each(function() {\r\n                    var categoryId = $(this).data('category');\r\n                    $('div.add-item-category[data-category=\"' + categoryId + '\"]').show();\r\n                });\r\n                // List of shared artefacts.\r\n                if ($('div.add-item[data-category=\"sharedFromUser\"]:visible').length == 0) {\r\n                    $('tr.sharedArtefacts').hide();\r\n                }\r\n            },\r\n\r\n            filterItemsByTitle: function() {\r\n                // Reset filter by tag.\r\n                if ($('.tagfilter').length) {\r\n                    $('.tagfilter')[0].selectedIndex = 0;\r\n                }\r\n                var text = $('#blockform #filterByTitle').val().toLowerCase();\r\n                $('div.add-item-category').hide();\r\n                $('div.add-item').show();\r\n                $('div.add-item-sub').show();\r\n                $('tr.sharedArtefacts').show();\r\n                if (text != '') {\r\n                    $('div.add-item:visible').each(function() {\r\n                        var elementText = $(this).text();\r\n                        if (elementText.toLowerCase().indexOf(text) > -1) {\r\n                            $(this).show();\r\n                        } else {\r\n                            $(this).hide();\r\n                        };\r\n                    });\r\n                } else {\r\n                    $('div.add-item-category, div.add-item-sub').show();\r\n                };\r\n                // Hide category names if it has no visible artefact.\r\n                $('div.add-item-sub').each(function() {\r\n                    if ($(this).find('div.add-item:visible').length == 0) {\r\n                        $(this).hide();\r\n                    };\r\n                });\r\n                $('div.add-item:visible').each(function(){\r\n                    var categoryId = $(this).data('category');\r\n                    $('div.add-item-category[data-category=\"' + categoryId + '\"]').show();\r\n                });\r\n                // List of shared artefacts.\r\n                if ($('div.add-item[data-category=\"sharedFromUser\"]:visible').length == 0) {\r\n                    $('tr.sharedArtefacts').hide();\r\n                }\r\n            },\r\n\r\n            clearItemFilters: function() {\r\n                if ($('.tagfilter').length) {\r\n                    $('.tagfilter')[0].selectedIndex = 0;\r\n                }\r\n                $('#blockform #filterByTitle').val('');\r\n                exaportViewEdit.filterItemsByTitle();\r\n            },\r\n\r\n            cancelAddEdit: function() {\r\n                dialogue.hide();\r\n                updateBlockData();\r\n            },\r\n\r\n        }\r\n        return viewEdit;\r\n    };\r\n\r\n    function resetElementStates()\r\n    {\r\n        $('.portfolioOptions li').removeClass('selected');\r\n        $('.portfolioDesignBlocks > li').each(function() {\r\n            $('.portfolioOptions li[itemid=' + $(this).data('portfolio').itemid + ']').addClass('selected');\r\n        });\r\n    }\r\n\r\n    function updateBlockData()\r\n    {\r\n        var blocks = [];\r\n        $('.portfolioDesignBlocks').each(function(positionx) {\r\n            // Immediate li children, because content can have li too.\r\n            $(this).children('li:visible').not('.block-placeholder').each(function(positiony) {\r\n                blocks.push($.extend($(this).data('portfolio'), {\r\n                    positionx: positionx + 1,\r\n                    positiony: positiony + 1\r\n                }));\r\n            });\r\n        });\r\n\r\n        var input = $('form :input[name=blocks]');\r\n        input.val($.toJSON(blocks));\r\n    };\r\n\r\n    function generateItem(type, data)\r\n    {\r\n        var $item;\r\n        if (type == 'new') {\r\n            $item = $('<li></li>');\r\n            $item.data('portfolio', data);\r\n        } else {\r\n            $item = $(data);\r\n\r\n            data = $item.data('portfolio');\r\n            if (!data) {\r\n                data = {};\r\n                if ($item.attr('itemid')) {\r\n                    data.type = 'item';\r\n                    data.itemid = $item.attr('itemid');\r\n                } else {\r\n                    data.type = $item.attr('block-type');\r\n                    if ($item.attr('text')) {\r\n                        data.text = $item.attr('text');\r\n                    }\r\n                    if ($item.attr('block_title')) {\r\n                        data.block_title = $item.attr('block_title');\r\n                    }\r\n                    if ($item.attr('firstname')) {\r\n                        data.firstname = $item.attr('firstname');\r\n                    }\r\n                    if ($item.attr('lastname')) {\r\n                        data.lastname = $item.attr('lastname');\r\n                    }\r\n                    if ($item.attr('picture')) {\r\n                        data.picture = $item.attr('picture');\r\n                    }\r\n                    if ($item.attr('email')) {\r\n                        data.email = $item.attr('email');\r\n                    }\r\n                }\r\n                // Store data.\r\n                $item.data('portfolio', data);\r\n            }\r\n        }\r\n\r\n        $item.addClass('item');\r\n        $item.css('position', 'relative');\r\n        /*\r\n        Bug, wenn auf relativ setzen\r\n        if ($.browser.msie) {\r\n            $item.css('height', '1%');\r\n        }.\r\n        */\r\n        var header_content = '';\r\n        if (data.itemid && !data.item && portfolioItems && portfolioItems[data.itemid]) {\r\n            data.item = portfolioItems[data.itemid];\r\n        }\r\n        if (data.type == 'item' && data.itemid && data.item) {\r\n            var itemData = data.item;\r\n            var ilink = itemData.link;\r\n            if (ilink != \"\") {\r\n                ilink = $E.translate('link') + ': ' + ilink + '<br />';\r\n            }\r\n\r\n            var itemPictures = '';\r\n            if (itemData.filescount > 1) {\r\n                var imgWidth = 40;\r\n                if (itemData.filescount > 3) {\r\n                    imgWidth = 35;\r\n                }\r\n                if (itemData.filescount > 5) {\r\n                    imgWidth = 30;\r\n                }\r\n                itemPictures += '<div class=\"pictureset\" style=\"float:right; position: relative; text-align: right; max-width: 150px;\">';\r\n                for (var imi = 0; imi < itemData.filescount; imi++) {\r\n                    if (imi && imi % 5 === 0) {\r\n                        itemPictures += '<br />';\r\n                    }\r\n                    // itemPictures += '<div class=\"picture\" style=\"float:right; position: relative; height: '+imgWidth+'px; width: '+imgWidth+'px;\">';\r\n                    itemPictures += '<div class=\"picture\" style=\"float:right; height: '+imgWidth+'px; width: '+imgWidth+'px;\">';\r\n                    itemPictures += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + M.cfg['wwwroot'] + '/blocks/exaport/item_thumb.php?item_id=' + itemData.id + '&imindex='+imi+'\">';\r\n                    itemPictures += '</div>';\r\n                }\r\n                itemPictures += '</div>';\r\n            } else {\r\n                itemPictures += '<div class=\"picture\" style=\"float:right; position: relative; height: 100px; width: 100px;\">';\r\n                itemPictures += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + M.cfg['wwwroot'] + '/blocks/exaport/item_thumb.php?item_id=' + itemData.id + '\">';\r\n                itemPictures += '</div>';\r\n            }\r\n\r\n            var tempString = '';\r\n            tempString += '<div id=\"id_holder\" style=\"display:none;\"></div> ';\r\n            tempString += '<div class=\"item_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('viewitem') + ': ' + itemData.name + '</div>';\r\n            tempString += itemPictures;\r\n            tempString += '<div class=\"body\">' + $E.translate('type') + ': ' + $E.translate(itemData.type) + '<br />';\r\n            tempString += $E.translate('category') + ': ' + itemData.category + '<br />' + ilink;\r\n            tempString += $E.translate('comments') + ': ' + itemData.comments + '<div class=\"exaport-item-intro\"></div>';\r\n            if (itemData.competences) {\r\n                tempString += '<script type=\"text/javascript\" src=\"javascript/wz_tooltip.js\"></script><a onmouseover=\"Tip(\\'' + itemData.competences + '\\')\" onmouseout=\"UnTip()\"><img src=\"' + M.cfg['wwwroot'] + '/pix/t/grades.png\" class=\"iconsmall\" alt=\"' + 'competences' + '\" /></a>';\r\n            };\r\n            tempString += '</div></div>';\r\n            $item.html(tempString);\r\n            if (!itemData.competences) {\r\n                // User html may be malformed, so savely inject it here.\r\n                $item.find('.exaport-item-intro').html(itemData.intro);\r\n            }\r\n        } else if (data.type == 'personal_information') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"personal_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('personalinformation') + ': </div>';\r\n            tempString += '<div class=\"picture\" style=\"float:right; position: relative;\"></div>';\r\n            tempString += '<div class=\"name\"></div>';\r\n            tempString += '<div class=\"email\"></div>';\r\n            tempString += '<div class=\"body\"></div>';\r\n            tempString += '</div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append(data.block_title);\r\n            if (data.picture != '' && data.picture != null) {\r\n                $item.find('div.picture').append('<img src=\"' + data.picture + '\">');\r\n            }\r\n            $item.find('div.name').append(data.firstname); $item.find('div.name').append(' ');\r\n            $item.find('div.name').append(data.lastname);\r\n            $item.find('div.email').append(data.email);\r\n            $item.find('div.body').append(data.print_text);\r\n        } else if (data.type == 'headline') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\">' + $E.translate('view_specialitem_headline') + '<div class=\"body\"></div></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.body').append(data.print_text);\r\n        } else if (data.type == 'media') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\"></div><div class=\"body\"></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append($E.translate('view_specialitem_media') + ($.trim(data.block_title).length ? ': ' + data.block_title : ''));\r\n            $item.find('div.body').append(data.contentmedia);\r\n        } else if (data.type == 'badge') {\r\n            if (typeof data.badge == 'undefined') {\r\n                $item.html('loading');\r\n            } else {\r\n                var badge = data.badge;\r\n                var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n                tempString += '<div class=\"item_info\" style=\"overflow: hidden;\">';\r\n                tempString += '<div class=\"header\">' + $E.translate('view_specialitem_badge') + ': ' + badge.name + '</div>';\r\n                tempString += '<div class=\"picture\" style=\"float:right; position: relative; height: 100px; width: 100px;\">';\r\n                tempString += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + badge.imageUrl + '\">';\r\n                tempString += '</div>';\r\n                tempString += '<div class=\"body\">' + badge.description + '</div>';\r\n                    /*\t\t\t\t+\r\n                                    '</div>' +\r\n                                    '<div class=\"body\">'+$E.translate('type')+': '+$E.translate(itemData.type)+'<br />' +\r\n                                    $E.translate('category')+': '+itemData.category+'<br />' + ilink +\r\n                                    $E.translate('comments')+': '+itemData.comments+'<br />' + itemData.intro +\r\n                                    '</div>\r\n                                    */\r\n                $item.html(tempString);\r\n            }\r\n        } else if (data.type == 'cv_information') {\r\n            data.item = null;\r\n            var bodyContent = '';\r\n            var titleContent = '';\r\n            var addToHeader = '';\r\n            var attachments = [];\r\n            switch (data.resume_itemtype) {\r\n                case 'edu':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_education_history');\r\n                    if (data.itemid && resumeItems && resumeItems.educations[data.itemid]) {\r\n                        itemData = resumeItems.educations[data.itemid];\r\n                        attachments = itemData.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"edu_institution\">' + itemData.institution + ':</span> ';\r\n                        description += '<span class=\"edu_qualname\">' + itemData.qualname + '</span>';\r\n                        if (itemData.startdate != '' || itemData.enddate != '') {\r\n                            description += ' (';\r\n                            if (itemData.startdate != '') {\r\n                                description += '<span class=\"edu_startdate\">' + itemData.startdate + '</span>';\r\n                            }\r\n                            if (itemData.enddate != '') {\r\n                                description += '<span class=\"edu_enddate\"> - ' + itemData.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (itemData.qualdescription != '') {\r\n                            description += '<span class=\"edu_qualdescription\">' + itemData.qualdescription + '</span>';\r\n                        }\r\n                        bodyContent = description;\r\n                    }\r\n                    break;\r\n                case 'employ':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_employment_history');\r\n                    if (data.itemid && resumeItems && resumeItems.employments[data.itemid]) {\r\n                        itemData = resumeItems.employments[data.itemid];\r\n                        attachments = itemData.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"employ_jobtitle\">' + itemData.jobtitle + ':</span> ';\r\n                        description += '<span class=\"employ_employer\">' + itemData.employer + '</span>';\r\n                        if (itemData.startdate != '' || itemData.enddate != '') {\r\n                            description += ' (';\r\n                            if (itemData.startdate != '') {\r\n                                description += '<span class=\"employ_startdate\">' + itemData.startdate + '</span>';\r\n                            }\r\n                            if (itemData.enddate != '') {\r\n                                description += '<span class=\"employ_enddate\"> - ' + itemData.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (itemData.positiondescription != '') {\r\n                            description += '<span class=\"employ_positiondescription\">' + itemData.positiondescription + '</span>';\r\n                        }\r\n                        bodyContent = description;\r\n                    }\r\n                    break;\r\n                case 'certif':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_certif');\r\n                    if (data.itemid && resumeItems && resumeItems.certifications[data.itemid]) {\r\n                        itemData = resumeItems.certifications[data.itemid];\r\n                        attachments = itemData.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"certif_title\">' + itemData.title + '</span> ';\r\n                        if (itemData.date != '') {\r\n                            description += '<span class=\"certif_date\">(' + itemData.date + ')</span>';\r\n                        }\r\n                        if (itemData.description != '') {\r\n                            description += '<span class=\"certif_description\">' + itemData.description + '</span>';\r\n                        }\r\n                        bodyContent = description;\r\n                    }\r\n                    break;\r\n                case 'public':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_public');\r\n                    if (data.itemid && resumeItems && resumeItems.publications[data.itemid]) {\r\n                        itemData = resumeItems.publications[data.itemid];\r\n                        attachments = itemData.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"public_title\">' + itemData.title;\r\n                        if (itemData.contribution != '') {\r\n                            description += ' (' + itemData.contribution + ')';\r\n                        }\r\n                        description += '</span> ';\r\n                        if (itemData.date != '') {\r\n                            description += '<span class=\"public_date\">(' + itemData.date + ')</span>';\r\n                        }\r\n                        if (itemData.contributiondetails != '' || itemData.url != '') {\r\n                            description += '<span class=\"public_description\">';\r\n                            if (itemData.contributiondetails != '') {\r\n                                description += itemData.contributiondetails;\r\n                            }\r\n                            if (itemData.url != '') {\r\n                                description += '<br /><a href=\"' + itemData.url + '\" class=\"public_url\" target=\"_blank\">' + itemData.url + '</a>';\r\n                            }\r\n                            description += '</span>';\r\n                        }\r\n                        bodyContent = description;\r\n                    }\r\n                    break;\r\n                case 'mbrship':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_mbrship');\r\n                    if (data.itemid && resumeItems && resumeItems.profmembershipments[data.itemid]) {\r\n                        itemData = resumeItems.profmembershipments[data.itemid];\r\n                        attachments = itemData.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"mbrship_title\">' + itemData.title + '</span> ';\r\n                        if (itemData.startdate != '' || itemData.enddate != '') {\r\n                            description += ' (';\r\n                            if (itemData.startdate != '') {\r\n                                description += '<span class=\"mbrship_startdate\">' + itemData.startdate + '</span>';\r\n                            }\r\n                            if (itemData.enddate != '') {\r\n                                description += '<span class=\"mbrship_enddate\"> - ' + itemData.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (itemData.description != '') {\r\n                            description += '<span class=\"mbrship_description\">' + itemData.description + '</span>';\r\n                        }\r\n                        bodyContent = description;\r\n                    }\r\n                    break;\r\n                case 'goalspersonal':\r\n                case 'goalsacademic':\r\n                case 'goalscareers':\r\n                case 'skillspersonal':\r\n                case 'skillsacademic':\r\n                case 'skillscareers':\r\n                    attachments = resumeItems[data.resume_itemtype + '_attachments'];\r\n                    console.log(resumeItems);\r\n                    console.log(data.resume_itemtype + '_attachments');\r\n                    addToHeader = $E.translate('resume_' + data.resume_itemtype);\r\n                    var description = '';\r\n                    if (resumeItems['' + data.resume_itemtype]) {\r\n                        description += '<span class=\"' + data.resume_itemtype + '_text\">' + resumeItems['' + data.resume_itemtype] + '</span> ';\r\n                    }\r\n                    bodyContent = description;\r\n                    break;\r\n                case 'interests':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_interests');\r\n                    var description = '';\r\n                    if (resumeItems.interests != '') {\r\n                        description += '<span class=\"interests\">' + resumeItems.interests + '</span> ';\r\n                    }\r\n                    bodyContent = description;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (data.resume_withfiles == \"1\" && attachments && attachments.length) {\r\n                bodyContent += '<ul class=\"resume_attachments ' + data.resume_itemtype + '_attachments\">';\r\n                $.each(attachments, function (k, file) {\r\n                    bodyContent += '<li><a href=\"' + file.fileurl + '\" target=\"_blank\">' + file.filename + '</a></li>';\r\n                })\r\n                bodyContent += '</ul>';\r\n            }\r\n\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"cv_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('cvinformation') + ': ' + addToHeader + '</div>';\r\n            tempString += '<div class=\"body\">' + bodyContent + '</div>';\r\n            tempString += '</div>';\r\n            $item.html(tempString);\r\n        } else {\r\n            data.type = 'text';\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\"></div>';\r\n            tempString += '<div class=\"body\"><p class=\"text\" ' + $E.translate('view_specialitem_text_defaulttext') + '\"></p></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append($E.translate('view_specialitem_text') + ($.trim(data.block_title).length ? ': ' + data.block_title : ''));\r\n            $item.find('div.body').append(data.print_text);\r\n        }\r\n\r\n        // Insert default texts.\r\n        $item.find(':input[default-text]').focus(function(){\r\n            $(this).removeClass('default-text');\r\n            if ($(this).attr('default-text') == $(this).val()) {\r\n                $(this).val('');\r\n            }\r\n        }).blur(function(){\r\n            if (!$.trim($(this).val())) {\r\n                $(this).addClass('default-text');\r\n                $(this).val($(this).attr('default-text'));\r\n            }\r\n        }).blur();\r\n        $item.find('div#id_holder').append(data.id);\r\n\r\n        if (type == 'new') {\r\n            // No edit button for items, badges and resume items.\r\n            var typesWithoutEditButton = ['item', 'badge', 'cv_information'];\r\n            // if ((data.type != 'item') && (data.type != 'badge')) {\r\n            if (!(typesWithoutEditButton.indexOf(data.type) > -1)) {\r\n                $('<a class=\"edit\" title=\"Edit\"><span>Edit</span></a>').prependTo($item).click(editItemClick);\r\n            }\r\n        }\r\n        else {\r\n            $item.append('<a class=\"unsaved\" title=\"This block was not saved\"><span>Unsaved</span></a>');\r\n        }\r\n        $('<a class=\"delete\" title=\"' + $E.translate('delete') + '\"><span>' + $E.translate('delete') + '</span></a>').prependTo($item).click(deleteItemClick);\r\n        $item.find(':input').change(function() {\r\n            $item.data('portfolio').text = $(this).val();\r\n        });\r\n        updateBlockData();\r\n        // Unshared blocks.\r\n        if (data.unshared == 1) {\r\n            $item.find('div.item_info').addClass('unshared_block');\r\n            $item_header = $item.find('div.header').html();\r\n            $item.find('div.header').html($item_header + '<span class=\"unshared_message\">Unshared</span>');\r\n        }\r\n        return $item;\r\n    }\r\n\r\n    // Click on 'delete' block.\r\n    function deleteItemClick()\r\n    {\r\n        $(this).parents('.item').remove();\r\n        resetElementStates();\r\n        updateBlockData();\r\n    }\r\n\r\n    function saveBlockData() {\r\n        var data = $('form#view_edit_form').serializeArray();\r\n        data.push({name: 'ajax', value: 1});\r\n        showPreloadinator($('#view-preview'), '', true);\r\n        $.ajax({\r\n            url: document.location.href,\r\n            type: 'POST',\r\n            data: data,\r\n            success: function(res) {\r\n                var data = JSON.parse(res);\r\n                $('form :input[name=blocks]').val(data.blocks);\r\n                exaportViewEdit.resetViewContent();\r\n                hidePreloadinator($('#view-preview'), '');\r\n            }\r\n        });\r\n    }\r\n\r\n    function editItemClick()\r\n    {\r\n        var item_id = $(this).parent().find(\"#id_holder\").html();\r\n        lastclicked = $(this).parent();\r\n        showPreloadinator(lastclicked, '', false);\r\n        $.ajax({\r\n            url: M.cfg['wwwroot'] + '/blocks/exaport/blocks.json.php',\r\n            type: 'POST',\r\n            data: {\r\n                item_id: item_id,\r\n                action: 'edit',\r\n                'viewid': $('form :input[name=viewid]').val(),\r\n                'text[itemid]': $('form :input[name=draft_itemid]').val(),\r\n                sesskey: $('form :input[name=sesskey]').val()\r\n            },\r\n            success: function(res) {\r\n                var data = JSON.parse(res);\r\n\r\n                showDialog(data.modalTitle, data.html);\r\n                // Focus first element.\r\n                // ...popup.$body.find('input:visible:first').focus();.\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    // Main function -> will be started on page load.\r\n    var initContentEdit = function() {\r\n\r\n        exaportViewEdit = exaportViewEditCreate();\r\n        exaportViewEdit.resetViewContent();\r\n\r\n        $(\".portfolioDesignBlocks\").sortable({\r\n            beforeStop: function (event, ui) {\r\n                newItem = ui.item;\r\n            },\r\n            receive: function(e, ui){\r\n\r\n                console.log('start to modal!');\r\n\r\n                // Get ajax only for item from the top block.\r\n                var uiattr = $(ui.item[0]).closest('ul').prop(\"className\");\r\n                if (uiattr.search(\"portfolioDesignBlocks\") == -1) {\r\n                    $.ajax({\r\n                        url: M.cfg['wwwroot'] + '/blocks/exaport/blocks.json.php',\r\n                        type: 'POST',\r\n                        data: {\r\n                            type_block: ui.item.attr('block-type'),\r\n                            action: 'add',\r\n                            'viewid': $('form :input[name=viewid]').val(),\r\n                            'text[itemid]': $('form :input[name=draft_itemid]').val(),\r\n                            sesskey: $('form :input[name=sesskey]').val()\r\n                        },\r\n                        success: function(res) {\r\n                            var data = JSON.parse (res);\r\n\r\n                            showDialog(data.modalTitle, data.html);\r\n\r\n                            // ...var popup = $E.popup({ bodyContent: data.html, onhide: function(){\r\n                            // if (newItem) $(newItem).remove();\r\n                            // } });\r\n                            // focus first element\r\n                            // $E.last_popup.$body.find('input:visible:first').focus();.\r\n\r\n                            // Create a <script> tag from result.\r\n                            $('#temp_javascript').remove();\r\n                            var script = document.createElement('script');\r\n                            $(script).attr('id', 'temp_javascript');\r\n                            // console.log(data.script);\r\n                            script.textContent = data.script;\r\n                            document.body.appendChild(script);\r\n\r\n                            $('body').on('change keydown paste input', '#filterByTitle', exaportViewEdit.filterItemsByTitle);\r\n                        }\r\n                    });\r\n                    updateBlockData();\r\n                }\r\n            },\r\n            update: function(e, ui) {\r\n                updateBlockData();\r\n            },\r\n            handle: '.header',\r\n            placeholder: \"block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            connectWith: ['.portfolioDesignBlocks'],\r\n        });\r\n        $(\".portfolioOptions\").sortable({\r\n            connectWith: ['.portfolioDesignBlocks'],\r\n            placeholder: \"block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            stop: function(e, ui) {\r\n                // Listenelemente zurücksetzen.\r\n                resetElements();\r\n            }\r\n            /*\r\n            remove: function(e, ui){\r\n                console.log(ui);\r\n                console.log(ui.element.html());\r\n                // ui.item.after(ui.placeholder.clone().css('visibility', ''));\r\n                console.log('remove');\r\n            }\r\n            */\r\n        });\r\n        $(\".portfolioElement\").draggable({\r\n            connectToSortable: '.portfolioDesignBlocks',\r\n            placeholder: \".block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            helper: \"clone\",\r\n            stop: function(e, ui){\r\n                showPreloadinator($(ui.helper), '', false);\r\n            }\r\n        });\r\n        $('body').on('click', '[data-toggle=\"gtn-help-modal\"]', function(e) {\r\n            e.preventDefault();\r\n            var trigger = $(this);\r\n            var title = $(this).attr('data-title');\r\n            var content = $(this).attr('data-content');\r\n            if (helpDialogue) {\r\n                helpDialogue.setTitle(title);\r\n                helpDialogue.setBody(content);\r\n                helpDialogue.show();\r\n            } else {\r\n                modalFactory.create({\r\n                    title: title,\r\n                    body: content,\r\n                    footer: '',\r\n                }, trigger).done(function (modal) {\r\n                    helpDialogue = modal;\r\n                    helpDialogue.setTitle(title);\r\n                    helpDialogue.setBody(content);\r\n                    // Display the dialogue.\r\n                    helpDialogue.show();\r\n                });\r\n            }\r\n        });\r\n\r\n\r\n    } // End initContentEdit.\r\n\r\n    function showPreloadinator(element, tohide, fixedposition) {\r\n        var id = 'preloader' + $.now();\r\n        var preloadinatorTemplate = '<div id=\"' + id + '\" class=\"preloader ' + (fixedposition ? 'preloader-fixed' : '') + ' js-preloader flex-center\">' +\r\n                '<div class=\"dots\">'+\r\n                    '<div class=\"dot\"></div>'+\r\n                    '<div class=\"dot\"></div>'+\r\n                    '<div class=\"dot\"></div>'+\r\n                '</div>'+\r\n            '</div>';\r\n        if (tohide != '') {\r\n            element.find(tohide).hide();\r\n        }\r\n        element.append(preloadinatorTemplate);\r\n        // hide element on very long requests\r\n        setTimeout('$(\\'#' + id + '\\').remove();', 15000); // 15 seconds\r\n\r\n    } // End showPreloadinator\r\n\r\n    function hidePreloadinator(element, toshow) {\r\n        if (toshow != '') {\r\n            $(element).find('.blocktype').show();\r\n        }\r\n        $(element).find('.preloader').remove();\r\n    } // End hidePreloadinator\r\n\r\n    function showDialog(title, body) {\r\n        if (dialogue) {\r\n            dialogue.setTitle(title);\r\n            dialogue.setBody(body);\r\n            // Display the dialogue.\r\n            dialogue.show();\r\n        } else {\r\n            modalFactory.create(defaultModalOptions).done(function (modal) {\r\n                dialogue = modal;\r\n                dialogue.setTitle(title);\r\n                dialogue.setBody(body);\r\n                // Display the dialogue.\r\n                dialogue.show();\r\n                // On show handler\r\n                /*dialogue.getRoot().on(modalEvents.shown, function () {\r\n                    console.log('modal is shown');\r\n                    console.log(data);\r\n                    dialogue.setTitle(data.modalTitle);\r\n                    dialogue.setBody(data.html);\r\n                });*/\r\n                // On show handler. (for slow requests)\r\n                dialogue.getRoot().on(modalEvents.shown, function () {\r\n                    hidePreloadinator(newItem, '.blocktype');\r\n                    hidePreloadinator(lastclicked, '');\r\n                    console.log('modal is shown');\r\n                });\r\n                // On hide handler.\r\n                dialogue.getRoot().on(modalEvents.hidden, function () {\r\n                    // Empty modal contents when it's hidden.\r\n                    // console.log('modal is hidden');\r\n                    dialogue.setBody('');\r\n                    // Hide handler.\r\n                    if (newItem) {\r\n                        $(newItem).remove();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    // Sharing.\r\n    function update_sharing()\r\n    {\r\n        var share_text = '';\r\n        var $form = $('#exaport-view-mod');\r\n\r\n        if ($form.find(':input[name=externaccess]').is(':checked')) {\r\n            share_text += $E.translate('externalaccess') + ' ';\r\n            $('#externaccess-settings').show();\r\n        } else {\r\n            $('#externaccess-settings').hide();\r\n        }\r\n\r\n        if ($form.find(':input[name=internaccess]').is(':checked')) {\r\n            $('#internaccess-settings').show();\r\n            $('#internaccess-groups').hide();\r\n            if (share_text) {\r\n                share_text += ' ' + $E.translate('viewand') + ' ';\r\n            }\r\n            share_text += $E.translate('internalaccess') + ': ';\r\n\r\n            if ($form.find(':input[name=shareall]:checked').val() == 1) {\r\n                share_text += $E.translate('internalaccessall');\r\n                $('#internaccess-users').hide();\r\n                $('#internaccess-groups').hide();\r\n            } else if ($form.find(':input[name=shareall]:checked').val() == 2) {\r\n                share_text += $E.translate('internalaccessgroups');\r\n                $('#internaccess-users').hide();\r\n                $('#internaccess-groups').show();\r\n                ExabisEportfolio.load_grouplist('views_mod');\r\n            } else {\r\n                share_text += $E.translate('internalaccessusers');\r\n                $('#internaccess-groups').hide();\r\n                $('#internaccess-users').show();\r\n                ExabisEportfolio.load_userlist('views_mod');\r\n            }\r\n        } else {\r\n            $('#internaccess-settings').hide();\r\n        }\r\n\r\n        if ($form.find(':input[name=sharedemails]').is(':checked')) {\r\n            if (share_text) {\r\n                share_text += ' ' + $E.translate('viewand') + ' ';\r\n            };\r\n            share_text += $E.translate('emailaccess') + ' ';\r\n            $('#emailaccess-settings').show();\r\n        } else {\r\n            $('#emailaccess-settings').hide();\r\n        };\r\n\r\n        if (!share_text) {\r\n            share_text = $E.translate('view_sharing_noaccess');\r\n        }\r\n        $('#view-share-text').html(share_text);\r\n    }\r\n\r\n    /*var initialise = function($params) {\r\n            console.log('exaport AMD loaded');\r\n            initContentEdit();\r\n            // for sharing of views\r\n            // changing the checkboxes / radiobuttons update the sharing text, visible options, etc.\r\n            $('.view-sharing input[type=checkbox], .view-sharing input[type=radio]').click(update_sharing);\r\n            update_sharing();\r\n        };\r\n        return initialise();.\r\n    */\r\n\r\n    // MAIN code of MODULE.\r\n    return {\r\n        initialise: function ($params) {\r\n            // console.log('exaport AMD loaded');\r\n            initContentEdit();\r\n            // For sharing of views\r\n            // changing the checkboxes / radiobuttons update the sharing text, visible options, etc.\r\n            $('.view-sharing input[type=checkbox], .view-sharing input[type=radio]').click(update_sharing);\r\n            update_sharing();\r\n        },\r\n    };\r\n\r\n});\r\n"],"file":"views.min.js"}