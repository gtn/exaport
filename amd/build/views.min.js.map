{"version":3,"file":"views.min.js","sources":["../src/views.js"],"sourcesContent":["var exaportViewEdit;\r\nvar newItem = null, lastclicked = null;\r\n\r\ndefine(['jquery',\r\n        'jqueryui',\r\n        'block_exaport/touchpunch',\r\n        'core/modal_factory',\r\n        'core/modal_events'],\r\n        function($, jqui, jquitp, modalFactory, modalEvents) {\r\n\r\n    var dialogue;\r\n    var helpDialogue;\r\n    // var last_popup;\r\n\r\n    var defaultModalOptions = {\r\n        title: 'test title',\r\n        body: '',\r\n        footer: '',\r\n        //template: 'SAVE_CANCEL',\r\n        //type: 'SAVE_CANCEL',\r\n    };\r\n\r\n    var exaportViewEditCreate = function() {\r\n\r\n        var viewEdit = {\r\n\r\n            strip_tags: function(text) {\r\n                let tempDoc = new DOMParser().parseFromString(text, 'text/html');\r\n                return tempDoc.body.textContent || \"\";\r\n            },\r\n\r\n            resetViewContent: function(){\r\n                // Load stored blocks.\r\n                var blocks = $('form :input[name=blocks]').val();\r\n                if (blocks) {\r\n                    blocks = JSON.parse(blocks);\r\n                }\r\n                var myresume = $('form :input[name=myresume]').val();\r\n                if (myresume) {\r\n                    myresume = JSON.parse(myresume);\r\n                }\r\n                if (!blocks) {\r\n                    // Start with headline.\r\n                    blocks = [{\r\n                        type: 'headline'\r\n                    }];\r\n                }\r\n                var portfolioDesignBlocks = $('.portfolioDesignBlocks');\r\n                portfolioDesignBlocks.empty();\r\n                $.each(blocks, function(){\r\n                    generateItem('new', this).appendTo(\r\n                        // Wenn vorhanden zur richtigen spalte hinzufÃ¼gen, sonst immer zur 1ten.\r\n                        (this.positionx && portfolioDesignBlocks[this.positionx - 1]) ? portfolioDesignBlocks[this.positionx - 1] : portfolioDesignBlocks[0]\r\n                    );\r\n                });\r\n                resetElementStates();\r\n                updateBlockData();\r\n            },\r\n\r\n            initAddItems: function(/*title*/){\r\n                $('#add-items-list .add-item').click(function(event){\r\n                    var $input = $(this).find('input');\r\n\r\n                    if (!$(event.target).is(':input')) {\r\n                        // Toggle checkbox (if the user clicked the div and not the checkbox).\r\n                        $input.prop('checked', !$input.prop('checked'));\r\n                    }\r\n\r\n                    if ($input.prop('checked')) {\r\n                        $(this).addClass('checked');\r\n                    } else {\r\n                        $(this).removeClass('checked');\r\n                    }\r\n                });\r\n            },\r\n\r\n            addPersonalInfo: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var data = new Object();\r\n                data.type = 'personal_information';\r\n                data.id = id;\r\n                if ($('#block_title').length) {\r\n                    data.block_title = this.strip_tags($('#block_title').val());\r\n                } else {\r\n                    data.block_title = '';\r\n                }\r\n                // if ($('#firstname').attr('checked') == 'checked') {\r\n                var fncheckbox = $('.pieform input[name=\"fields\\[firstname\\]\"]').first();\r\n                if (fncheckbox !== undefined && fncheckbox.is(':checked')) {\r\n                    data.firstname = fncheckbox.val();\r\n                }\r\n                // if ($('#lastname').attr('checked') == 'checked') {\r\n                var lncheckbox = $('.pieform input[name=\"fields\\[lastname\\]\"]').first();\r\n                if (lncheckbox.is(':checked')) {\r\n                    data.lastname = lncheckbox.val();\r\n                }\r\n                data.picture = $('form input[name=picture]:checked').val();\r\n                data.email = $('form input[name=email]:checked').val();\r\n                // ...data.text = tinyMCE.get('block_intro').getContent();.\r\n                data.text = $('#id_block_intro').val();\r\n                // If it is tinyMCE: use #tinymce.\r\n                if ($('.mceEditor iframe').length) {\r\n                    var iframe = $('.mceEditor iframe');\r\n                    var iframetextElement = $('#tinymce', iframe.contents());\r\n                    if (iframetextElement.length) {\r\n                        data.text = iframetextElement.html();\r\n                    }\r\n                }\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addHeadline: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.text = $('#headline').val();\r\n                data.type = 'headline';\r\n                data.id = id;\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                // ...$E.last_popup.remove();.\r\n                newItem = null;\r\n                dialogue.hide();\r\n                saveBlockData();\r\n            },\r\n\r\n            addText: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.type = 'text';\r\n                data.id = id;\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                // ...data.text = tinymce.get('block_text').getContent();.\r\n                data.text = $('#id_block_text').val();\r\n                // If it is tinyMCE: use #tinymce.\r\n                if ($('.mceEditor iframe').length) {\r\n                    var iframe = $('.mceEditor iframe');\r\n                    var iframetextElement = $('#tinymce', iframe.contents());\r\n                    if (iframetextElement.length) {\r\n                        data.text = iframetextElement.html();\r\n                    }\r\n                }\r\n                // ...data.text = $('#id_text').val();.\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addItem: function(id) {\r\n\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n\r\n                var i = 0;\r\n                $('#blockform input.add-item-checkbox:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    };\r\n                    data = {};\r\n                    data.type = 'item';\r\n                    data.itemid = $(this).val();\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addCvInfo: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                // 'with files' checked\r\n                var resume_withfiles = 0;\r\n                if ($('#blockform [name=\"add_withfiles\"]').is(\":checked\")) {\r\n                    resume_withfiles = 1;\r\n                }\r\n                // 'group by category' checked\r\n                var category_grouping = 0;\r\n                if ($('#blockform [name=\"category_grouping\"]').is(\":checked\")) {\r\n                    category_grouping = 1;\r\n                }\r\n                if (category_grouping) {\r\n                    // every CV item grouped by category\r\n                    // 1. group selected checkboxes\r\n                    var groupedValues = {};\r\n                    $('#blockform input.add-cvitem-checkbox').each(function() {\r\n                        if ($(this).is(':checked')) {\r\n                            // Get the value and data-cvtype attribute\r\n                            var itemid = $(this).val();\r\n                            var cvtype = $(this).data('cvtype');\r\n                            // 'goals' group\r\n                            if (['goalspersonal', 'goalsacademic', 'goalscareers'].indexOf(cvtype) > -1) {\r\n                                itemid = cvtype;\r\n                                cvtype = 'goals';\r\n                            }\r\n                            // 'skills' group\r\n                            if (['skillspersonal', 'skillsacademic', 'skillscareers'].indexOf(cvtype) > -1) {\r\n                                itemid = cvtype;\r\n                                cvtype = 'skills';\r\n                            }\r\n                            if (!groupedValues[cvtype]) {\r\n                                groupedValues[cvtype] = [];\r\n                            }\r\n                            // fill group values\r\n                            groupedValues[cvtype].push(itemid);\r\n                        }\r\n                    });\r\n                    // 2. generate new blocks from grouped values\r\n                    Object.keys(groupedValues).map(function(groupType) {\r\n                        i = i + 1;\r\n                        if (i > 1) {\r\n                            var clone = $(newItem).clone();\r\n                            newItem.after(clone);\r\n                            newItem = clone;\r\n                        }\r\n                        data = {};\r\n                        data.type = 'cv_group';\r\n                        data.resume_itemtype = groupType;\r\n                        data.itemid = null;\r\n                        data.text = groupedValues[groupType].join(',');\r\n                        data.resume_withfiles = resume_withfiles;\r\n                        newItem.data('portfolio', data);\r\n                        generateItem('update', $(newItem));\r\n                    });\r\n                } else {\r\n                    // every CV item after each other\r\n                    $('#blockform input.add-cvitem-checkbox:checked').each(function () {\r\n                        i = i + 1;\r\n                        if (i > 1) {\r\n                            var clone = $(newItem).clone();\r\n                            newItem.after(clone);\r\n                            newItem = clone;\r\n                        }\r\n                        data = {};\r\n                        data.type = 'cv_information';\r\n                        data.itemid = $(this).val();\r\n                        data.resume_withfiles = resume_withfiles;\r\n                        data.resume_itemtype = $(this).attr('data-cvtype');\r\n                        var goalsSkills = ['goalspersonal', 'goalsacademic', 'goalscareers',\r\n                            'skillspersonal', 'skillsacademic', 'skillscareers'];\r\n                        if (goalsSkills.indexOf(data.resume_itemtype) > -1) {\r\n                            data.itemid = null;\r\n                        }\r\n                        newItem.data('portfolio', data);\r\n                        generateItem('update', $(newItem));\r\n                    });\r\n                }\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addMedia: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                data = {};\r\n                data.block_title = this.strip_tags($('#block_title').val());\r\n                data.type = 'media';\r\n                data.contentmedia = $('#block_media').val();\r\n                data.width = $('#block_width').val();\r\n                data.height = $('#block_height').val();\r\n                data.create_as_note = $('input[name=create_as_note]:checked').length ? 1 : 0;\r\n                data.id = id;\r\n                newItem.data('portfolio', data);\r\n                generateItem('update', $(newItem));\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            addBadge: function(id) {\r\n                if (!this.checkFields()) {\r\n                    return;\r\n                }\r\n                if (id != -1) {\r\n                    newItem = lastclicked;\r\n                }\r\n                var i = 0;\r\n                $('#blockform input[name=\"add_badges[]\"]:checked').each(function () {\r\n                    i = i + 1;\r\n                    if (i > 1) {\r\n                        var clone = $(newItem).clone();\r\n                        newItem.after(clone);\r\n                        newItem = clone;\r\n                    };\r\n                    data = {};\r\n                    data.type = 'badge';\r\n                    data.itemid = $(this).val();\r\n                    newItem.data('portfolio', data);\r\n                    generateItem('update', $(newItem));\r\n                });\r\n                dialogue.hide();\r\n                newItem = null;\r\n                saveBlockData();\r\n            },\r\n\r\n            checkFields: function() {\r\n                var ok = true;\r\n                $('#blockform .not-empty-check').each(function(){\r\n                    var forInput = $(this).attr('for');\r\n                    var input = $('#blockform').find('input[name=\"' + forInput + '\"]');\r\n                    if (input.length == 0) {\r\n                        // Input not found, ignore.\r\n                        $(this).hide();\r\n                        return;\r\n                    }\r\n                    if (input.val().length) {\r\n                        // Has value.\r\n                        $(this).hide();\r\n                        return;\r\n                    }\r\n                    // Show error.\r\n                    $(this).show();\r\n                    input.focus();\r\n                    ok = false;\r\n                    return false;\r\n                });\r\n\r\n                // All checks ok.\r\n                return ok;\r\n            },\r\n\r\n            filterItemsByTag: function() {\r\n                // Clear the search by title.\r\n                $('#filterByTitle').val('');\r\n                $('div.add-item-category').hide();\r\n                $('div.add-item').show();\r\n                $('div.add-item-sub').show();\r\n                $('tr.sharedArtefacts').show();\r\n                var selectedTag = $('.tagfilter').val();\r\n                if (selectedTag != '') {\r\n                    $('div.add-item').each(function() {\r\n                        var elementTags = $(this).data('tags');\r\n                        if (elementTags !== undefined) {\r\n                            if (elementTags.indexOf(selectedTag) == -1) {\r\n                                $(this).hide();\r\n                            }\r\n                        } else {\r\n                            $(this).hide();\r\n                        }\r\n                    });\r\n                } else {\r\n                    $('div.add-item-category, div.add-item-sub').show();\r\n                }\r\n                // Hide category names if it has no visible artefact.\r\n                $('div.add-item-sub').each(function(){\r\n                    if ($(this).find('div.add-item:visible').length == 0) {\r\n                        $(this).hide();\r\n                    }\r\n                });\r\n                $('div.add-item:visible').each(function() {\r\n                    var category_id = $(this).data('category');\r\n                    $('div.add-item-category[data-category=\"' + category_id + '\"]').show();\r\n                });\r\n                // List of shared artefacts.\r\n                if ($('div.add-item[data-category=\"sharedFromUser\"]:visible').length == 0) {\r\n                    $('tr.sharedArtefacts').hide();\r\n                }\r\n            },\r\n\r\n            filterItemsByTitle: function() {\r\n                // Reset filter by tag.\r\n                if ($('.tagfilter').length) {\r\n                    $('.tagfilter')[0].selectedIndex = 0;\r\n                }\r\n                var text = $('#blockform #filterByTitle').val().toLowerCase();\r\n                $('div.add-item-category').hide();\r\n                $('div.add-item').show();\r\n                $('div.add-item-sub').show();\r\n                $('tr.sharedArtefacts').show();\r\n                if (text != '') {\r\n                    $('div.add-item:visible').each(function() {\r\n                        var elementText = $(this).text();\r\n                        if (elementText.toLowerCase().indexOf(text) > -1) {\r\n                            $(this).show();\r\n                        } else {\r\n                            $(this).hide();\r\n                        }\r\n                    });\r\n                } else {\r\n                    $('div.add-item-category, div.add-item-sub').show();\r\n                }\r\n                // Hide category names if it has no visible artefact.\r\n                $('div.add-item-sub').each(function() {\r\n                    if ($(this).find('div.add-item:visible').length == 0) {\r\n                        $(this).hide();\r\n                    }\r\n                });\r\n                $('div.add-item:visible').each(function(){\r\n                    var category_id = $(this).data('category');\r\n                    $('div.add-item-category[data-category=\"' + category_id + '\"]').show();\r\n                });\r\n                // List of shared artefacts.\r\n                if ($('div.add-item[data-category=\"sharedFromUser\"]:visible').length == 0) {\r\n                    $('tr.sharedArtefacts').hide();\r\n                }\r\n            },\r\n\r\n            clearItemFilters: function() {\r\n                if ($('.tagfilter').length) {\r\n                    $('.tagfilter')[0].selectedIndex = 0;\r\n                }\r\n                $('#blockform #filterByTitle').val('');\r\n                exaportViewEdit.filterItemsByTitle();\r\n            },\r\n\r\n            cancelAddEdit: function() {\r\n                dialogue.hide();\r\n                updateBlockData();\r\n            },\r\n\r\n        }\r\n        return viewEdit;\r\n    };\r\n\r\n    function resetElementStates()\r\n    {\r\n        $('.portfolioOptions li').removeClass('selected');\r\n        $('.portfolioDesignBlocks > li').each(function() {\r\n            $('.portfolioOptions li[itemid=' + $(this).data('portfolio').itemid + ']').addClass('selected');\r\n        });\r\n    }\r\n\r\n    function updateBlockData()\r\n    {\r\n        var blocks = [];\r\n        $('.portfolioDesignBlocks').each(function(positionx) {\r\n            // Immediate li children, because content can have li too.\r\n            $(this).children('li:visible').not('.block-placeholder').each(function(positiony) {\r\n                blocks.push($.extend($(this).data('portfolio'), {\r\n                    positionx: positionx + 1,\r\n                    positiony: positiony + 1\r\n                }));\r\n            });\r\n        });\r\n\r\n        var input = $('form :input[name=blocks]');\r\n        input.val(JSON.stringify(blocks));\r\n    }\r\n\r\n    function generateItem(type, data)\r\n    {\r\n        var $item;\r\n        if (type == 'new') {\r\n            $item = $('<li></li>');\r\n            $item.data('portfolio', data);\r\n        } else {\r\n            $item = $(data);\r\n\r\n            data = $item.data('portfolio');\r\n            if (!data) {\r\n                data = {};\r\n                if ($item.attr('itemid')) {\r\n                    data.type = 'item';\r\n                    data.itemid = $item.attr('itemid');\r\n                } else {\r\n                    data.type = $item.attr('block-type');\r\n                    if ($item.attr('text')) {\r\n                        data.text = $item.attr('text');\r\n                    }\r\n                    if ($item.attr('block_title')) {\r\n                        data.block_title = $item.attr('block_title');\r\n                    }\r\n                    if ($item.attr('firstname')) {\r\n                        data.firstname = $item.attr('firstname');\r\n                    }\r\n                    if ($item.attr('lastname')) {\r\n                        data.lastname = $item.attr('lastname');\r\n                    }\r\n                    if ($item.attr('picture')) {\r\n                        data.picture = $item.attr('picture');\r\n                    }\r\n                    if ($item.attr('email')) {\r\n                        data.email = $item.attr('email');\r\n                    }\r\n                }\r\n                // Store data.\r\n                $item.data('portfolio', data);\r\n            }\r\n        }\r\n\r\n        $item.addClass('item');\r\n        $item.css('position', 'relative');\r\n        /*\r\n        Bug, wenn auf relativ setzen\r\n        if ($.browser.msie) {\r\n            $item.css('height', '1%');\r\n        }.\r\n        */\r\n        // var header_content = '';\r\n        if (typeof portfolioItems === 'undefined') {\r\n            var portfolioItems = window.portfolioItems;\r\n        }\r\n        var $E = window.block_exaport;\r\n        if (data.itemid && !data.item && portfolioItems && portfolioItems[data.itemid]) {\r\n            data.item = portfolioItems[data.itemid];\r\n        }\r\n        if (data.type == 'item' && data.itemid && data.item) {\r\n            var item_data = data.item;\r\n            var ilink = item_data.link;\r\n            if (ilink != \"\") {\r\n                ilink = $E.translate('link') + ': ' + ilink + '<br />';\r\n            }\r\n\r\n            var itemPictures = '';\r\n            if (item_data.filescount > 1) {\r\n                var imgWidth = 40;\r\n                if (item_data.filescount > 3) {\r\n                    imgWidth = 35;\r\n                }\r\n                if (item_data.filescount > 5) {\r\n                    imgWidth = 30;\r\n                }\r\n                itemPictures += '<div class=\"pictureset\" style=\"float:right; position: relative; text-align: right; max-width: 150px;\">';\r\n                for (var imi = 0; imi < item_data.filescount; imi++) {\r\n                    if (imi && imi % 5 === 0) {\r\n                        itemPictures += '<br />';\r\n                    }\r\n                    // itemPictures += '<div class=\"picture\" style=\"float:right; position: relative; height: '+imgWidth+'px; width: '+imgWidth+'px;\">';\r\n                    itemPictures += '<div class=\"picture\" style=\"float:right; height: '+imgWidth+'px; width: '+imgWidth+'px;\">';\r\n                    itemPictures += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + M.cfg['wwwroot'] + '/blocks/exaport/item_thumb.php?item_id=' + item_data.id + '&imindex='+imi+'\">';\r\n                    itemPictures += '</div>';\r\n                }\r\n                itemPictures += '</div>';\r\n            } else {\r\n                itemPictures += '<div class=\"picture\" style=\"float:right; position: relative; height: 100px; width: 100px;\">';\r\n                itemPictures += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + M.cfg['wwwroot'] + '/blocks/exaport/item_thumb.php?item_id=' + item_data.id + '\">';\r\n                itemPictures += '</div>';\r\n            }\r\n\r\n            var tempString = '';\r\n            tempString += '<div id=\"id_holder\" style=\"display:none;\"></div> ';\r\n            tempString += '<div class=\"item_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('viewitem') + ': ' + item_data.name + '</div>';\r\n            tempString += itemPictures;\r\n            tempString += '<div class=\"body\">' + $E.translate('type') + ': ' + $E.translate(item_data.type) + '<br />';\r\n            tempString += $E.translate('category') + ': ' + item_data.category + '<br />' + ilink;\r\n            tempString += $E.translate('comments') + ': ' + item_data.comments + '<div class=\"exaport-item-intro\"></div>';\r\n            if (item_data.competences) {\r\n                tempString += '<script type=\"text/javascript\" src=\"javascript/wz_tooltip.js\"></script><a onmouseover=\"Tip(\\'' + item_data.competences + '\\')\" onmouseout=\"UnTip()\"><img src=\"' + M.cfg['wwwroot'] + '/pix/t/grades.png\" class=\"iconsmall\" alt=\"' + 'competences' + '\" /></a>';\r\n            }\r\n            tempString += '</div></div>';\r\n            $item.html(tempString);\r\n            if (!item_data.competences) {\r\n                // User html may be malformed, so savely inject it here.\r\n                $item.find('.exaport-item-intro').html(item_data.intro);\r\n            }\r\n        } else if (data.type == 'personal_information') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"personal_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('personalinformation') + ': </div>';\r\n            tempString += '<div class=\"picture\" style=\"float:right; position: relative;\"></div>';\r\n            tempString += '<div class=\"name\"></div>';\r\n            tempString += '<div class=\"email\"></div>';\r\n            tempString += '<div class=\"body\"></div>';\r\n            tempString += '</div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append(data.block_title);\r\n            if (data.picture != '' && data.picture != null) {\r\n                $item.find('div.picture').append('<img src=\"' + data.picture + '\">');\r\n            }\r\n            $item.find('div.name').append(data.firstname); $item.find('div.name').append(' ');\r\n            $item.find('div.name').append(data.lastname);\r\n            $item.find('div.email').append(data.email);\r\n            $item.find('div.body').append(data.print_text);\r\n        } else if (data.type == 'headline') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\">' + $E.translate('view_specialitem_headline') + '<div class=\"body\"></div></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.body').append(data.print_text);\r\n        } else if (data.type == 'media') {\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\"></div><div class=\"body\"></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append($E.translate('view_specialitem_media') + ($.trim(data.block_title).length ? ': ' + data.block_title : ''));\r\n            $item.find('div.body').append(data.contentmedia);\r\n        } else if (data.type == 'badge') {\r\n            if (typeof data.badge == 'undefined') {\r\n                $item.html('loading');\r\n            } else {\r\n                var badge = data.badge;\r\n                var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n                tempString += '<div class=\"item_info\" style=\"overflow: hidden;\">';\r\n                tempString += '<div class=\"header\">' + $E.translate('view_specialitem_badge') + ': ' + badge.name + '</div>';\r\n                tempString += '<div class=\"picture\" style=\"float:right; position: relative; height: 100px; width: 100px;\">';\r\n                tempString += '<img style=\"max-width: 100%; max-height: 100%;\" src=\"' + badge.imageUrl + '\">';\r\n                tempString += '</div>';\r\n                tempString += '<div class=\"body\">' + badge.description + '</div>';\r\n                                    /* +\r\n                                    '</div>' +\r\n                                    '<div class=\"body\">'+$E.translate('type')+': '+$E.translate(item_data.type)+'<br />' +\r\n                                    $E.translate('category')+': '+item_data.category+'<br />' + ilink +\r\n                                    $E.translate('comments')+': '+item_data.comments+'<br />' + item_data.intro +\r\n                                    '</div>\r\n                                    */\r\n                $item.html(tempString);\r\n            }\r\n        } else if (data.type == 'cv_group') {\r\n\r\n            var addAttachmentsToGroup = function(attachments) {\r\n                var attachmentsContent = '';\r\n                if (attachments && attachments.length) {\r\n                    attachmentsContent += '<ul class=\"resume_attachments ' + data.resume_itemtype + '_attachments\">';\r\n                    $.each(attachments, function (k, file) {\r\n                        attachmentsContent += '<li><a href=\"' + file.fileurl + '\" target=\"_blank\">' + file.filename + '</a></li>';\r\n                    });\r\n                    attachmentsContent += '</ul>';\r\n                }\r\n                return attachmentsContent;\r\n            };\r\n            // data = {};\r\n            // data.type = 'cv_group';\r\n            // data.resume_itemtype = groupType;\r\n            // data.itemid = null;\r\n            // data.text = groupedValues[groupType].join(',');\r\n            // data.resume_withfiles = resume_withfiles;\r\n            var body_content = '';\r\n            var attachments = [];\r\n            switch (data.resume_itemtype) {\r\n                case 'cover':\r\n                    addToHeader = '';\r\n                    if (resumeItems && resumeItems.cover) {\r\n                        body_content = resumeItems.cover;\r\n                    }\r\n                    break;\r\n                case 'edu':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_education_history');\r\n                    if (data.text && resumeItems) {\r\n                        var itemIds = data.text.split(',');\r\n                        itemIds.forEach(function(itemid, index) {\r\n                            if (resumeItems.educations[itemid]) {\r\n                                item_data = resumeItems.educations[itemid];\r\n                                var description = '';\r\n                                description += '<span class=\"edu_institution\">' + item_data.institution + ':</span> ';\r\n                                description += '<span class=\"edu_qualname\">' + item_data.qualname + '</span>';\r\n                                if (item_data.startdate != '' || item_data.enddate != '') {\r\n                                    description += ' (';\r\n                                    if (item_data.startdate != '') {\r\n                                        description += '<span class=\"edu_startdate\">' + item_data.startdate + '</span>';\r\n                                    }\r\n                                    if (item_data.enddate != '') {\r\n                                        description += '<span class=\"edu_enddate\"> - ' + item_data.enddate + '</span>';\r\n                                    }\r\n                                    description += ')';\r\n                                }\r\n                                if (item_data.qualdescription != '') {\r\n                                    description += '<span class=\"edu_qualdescription\">' + item_data.qualdescription + '</span>';\r\n                                }\r\n                                body_content += description;\r\n                                if (index < itemIds.length - 1) {\r\n                                    body_content += '<br>';\r\n                                }\r\n                                attachments = item_data.attachments;\r\n                                if (data.resume_withfiles == \"1\" && attachments && attachments.length) {\r\n                                    body_content += '<ul class=\"resume_attachments ' + data.resume_itemtype + '_attachments\">';\r\n                                    $.each(attachments, function (k, file) {\r\n                                        body_content += '<li><a href=\"' + file.fileurl + '\" target=\"_blank\">' + file.filename + '</a></li>';\r\n                                    });\r\n                                    body_content += '</ul>';\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                    break;\r\n                case 'employ':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_employment_history');\r\n                    if (data.text && resumeItems) {\r\n                        var itemIds = data.text.split(',');\r\n                        itemIds.forEach(function(itemid, index) {\r\n                            if (resumeItems.educations[itemid]) {\r\n                                item_data = resumeItems.employments[itemid];\r\n                                var description = '';\r\n                                description += '<span class=\"employ_jobtitle\">' + item_data.jobtitle + ':</span> ';\r\n                                description += '<span class=\"employ_employer\">' + item_data.employer + '</span>';\r\n                                if (item_data.startdate != '' || item_data.enddate != '') {\r\n                                    description += ' (';\r\n                                    if (item_data.startdate != '') {\r\n                                        description += '<span class=\"employ_startdate\">' + item_data.startdate + '</span>';\r\n                                    }\r\n                                    if (item_data.enddate != '') {\r\n                                        description += '<span class=\"employ_enddate\"> - ' + item_data.enddate + '</span>';\r\n                                    }\r\n                                    description += ')';\r\n                                }\r\n                                if (item_data.positiondescription != '') {\r\n                                    description += '<span class=\"employ_positiondescription\">' + item_data.positiondescription + '</span>';\r\n                                }\r\n                                body_content += description;\r\n                                if (index < itemIds.length - 1) {\r\n                                    body_content += '<br>';\r\n                                }\r\n                                attachments = item_data.attachments;\r\n                                if (data.resume_withfiles == \"1\" && attachments && attachments.length) {\r\n                                    body_content += '<ul class=\"resume_attachments ' + data.resume_itemtype + '_attachments\">';\r\n                                    $.each(attachments, function (k, file) {\r\n                                        body_content += '<li><a href=\"' + file.fileurl + '\" target=\"_blank\">' + file.filename + '</a></li>';\r\n                                    });\r\n                                    body_content += '</ul>';\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    break;\r\n                case 'certif':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_certif');\r\n                    if (data.text && resumeItems) {\r\n                        var itemIds = data.text.split(',');\r\n                        itemIds.forEach(function (itemid, index) {\r\n                            if (resumeItems.certifications[itemid]) {\r\n                                item_data = resumeItems.certifications[itemid];\r\n                                var description = '';\r\n                                description += '<span class=\"certif_title\">' + item_data.title + '</span> ';\r\n                                if (item_data.date != '') {\r\n                                    description += '<span class=\"certif_date\">(' + item_data.date + ')</span>';\r\n                                }\r\n                                if (item_data.description != '') {\r\n                                    description += '<span class=\"certif_description\">' + item_data.description + '</span>';\r\n                                }\r\n                                body_content += description;\r\n                                if (index < itemIds.length - 1) {\r\n                                    body_content += '<br>';\r\n                                }\r\n                                attachments = item_data.attachments;\r\n                                if (data.resume_withfiles == \"1\" && attachments && attachments.length) {\r\n                                    body_content += '<ul class=\"resume_attachments ' + data.resume_itemtype + '_attachments\">';\r\n                                    $.each(attachments, function (k, file) {\r\n                                        body_content += '<li><a href=\"' + file.fileurl + '\" target=\"_blank\">' + file.filename + '</a></li>';\r\n                                    });\r\n                                    body_content += '</ul>';\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    break;\r\n                case 'public':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_public');\r\n                    if (data.text && resumeItems) {\r\n                        var itemIds = data.text.split(',');\r\n                        itemIds.forEach(function (itemid, index) {\r\n                            if (resumeItems.publications[itemid]) {\r\n                                item_data = resumeItems.publications[itemid];\r\n                                var description = '';\r\n                                description += '<span class=\"public_title\">' + item_data.title;\r\n                                if (item_data.contribution != '') {\r\n                                    description += ' (' + item_data.contribution + ')';\r\n                                }\r\n                                description += '</span> ';\r\n                                if (item_data.date != '') {\r\n                                    description += '<span class=\"public_date\">(' + item_data.date + ')</span>';\r\n                                }\r\n                                if (item_data.contributiondetails != '' || item_data.url != '') {\r\n                                    description += '<span class=\"public_description\">';\r\n                                    if (item_data.contributiondetails != '') {\r\n                                        description += item_data.contributiondetails;\r\n                                    }\r\n                                    if (item_data.url != '') {\r\n                                        description += '<br /><a href=\"' + item_data.url + '\" class=\"public_url\" target=\"_blank\">' + item_data.url + '</a>';\r\n                                    }\r\n                                    description += '</span>';\r\n                                }\r\n                                body_content += description;\r\n                                if (index < itemIds.length - 1) {\r\n                                    body_content += '<br>';\r\n                                }\r\n                                attachments = item_data.attachments;\r\n                                if (data.resume_withfiles == \"1\" && attachments && attachments.length) {\r\n                                    body_content += '<ul class=\"resume_attachments ' + data.resume_itemtype + '_attachments\">';\r\n                                    $.each(attachments, function (k, file) {\r\n                                        body_content += '<li><a href=\"' + file.fileurl + '\" target=\"_blank\">' + file.filename + '</a></li>';\r\n                                    });\r\n                                    body_content += '</ul>';\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    break;\r\n                case 'mbrship':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_mbrship');\r\n                    if (data.text && resumeItems) {\r\n                        var itemIds = data.text.split(',');\r\n                        itemIds.forEach(function (itemid, index) {\r\n                            if (resumeItems.profmembershipments[itemid]) {\r\n                                item_data = resumeItems.profmembershipments[itemid];\r\n                                var description = '';\r\n                                description += '<span class=\"mbrship_title\">' + item_data.title + '</span> ';\r\n                                if (item_data.startdate != '' || item_data.enddate != '') {\r\n                                    description += ' (';\r\n                                    if (item_data.startdate != '') {\r\n                                        description += '<span class=\"mbrship_startdate\">' + item_data.startdate + '</span>';\r\n                                    }\r\n                                    if (item_data.enddate != '') {\r\n                                        description += '<span class=\"mbrship_enddate\"> - ' + item_data.enddate + '</span>';\r\n                                    }\r\n                                    description += ')';\r\n                                }\r\n                                if (item_data.description != '') {\r\n                                    description += '<span class=\"mbrship_description\">' + item_data.description + '</span>';\r\n                                }\r\n                                body_content += description;\r\n                                if (index < itemIds.length - 1) {\r\n                                    body_content += '<br>';\r\n                                }\r\n                                attachments = item_data.attachments;\r\n                                if (data.resume_withfiles == \"1\" && attachments && attachments.length) {\r\n                                    body_content += '<ul class=\"resume_attachments ' + data.resume_itemtype + '_attachments\">';\r\n                                    $.each(attachments, function (k, file) {\r\n                                        body_content += '<li><a href=\"' + file.fileurl + '\" target=\"_blank\">' + file.filename + '</a></li>';\r\n                                    });\r\n                                    body_content += '</ul>';\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    break;\r\n                case 'goals':\r\n                case 'skills':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_' + data.resume_itemtype);\r\n                    if (data.text && resumeItems) {\r\n                        var itemIds = data.text.split(',');\r\n                        itemIds.forEach(function (goalSkillType, index) {\r\n                            var description = '';\r\n                            if (resumeItems[goalSkillType]) {\r\n                                description += '<strong>' + $E.translate('resume_' + goalSkillType) + ':</strong><br>';\r\n                                description += '<span class=\"' + goalSkillType + '_text\">' + resumeItems[goalSkillType] + '</span> ';\r\n                            }\r\n                            description = description.replace(/(<br\\s*\\/?>)+$/i, '');\r\n                            attachments = resumeItems[goalSkillType + '_attachments'];\r\n                            description += addAttachmentsToGroup(attachments);\r\n                            body_content += description;\r\n                            if (index < itemIds.length - 1) {\r\n                                body_content += '<br>';\r\n                            }\r\n\r\n                        });\r\n                    }\r\n                    break;\r\n                case 'interests':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_interests');\r\n                    var description = '';\r\n                    if (resumeItems.interests != '') {\r\n                        description += '<span class=\"interests\">' + resumeItems.interests + '</span> ';\r\n                    }\r\n                    body_content = description;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            // only grup content is not empty:\r\n            if (body_content != '') {\r\n                var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n                tempString += '<div class=\"cv_group\" style=\"overflow: hidden;\">';\r\n                tempString += '<div class=\"header\">' + $E.translate('cvgroup') + ': ' + addToHeader + '</div>';\r\n                tempString += '<div class=\"body\">' + body_content + '</div>';\r\n                tempString += '</div>';\r\n                $item.html(tempString);\r\n            }\r\n\r\n        } else if (data.type == 'cv_information') {\r\n            data.item = null;\r\n            var body_content = '';\r\n            // var titleContent = '';\r\n            // var resumeItems;\r\n            var addToHeader = '';\r\n            var attachments = [];\r\n            switch (data.resume_itemtype) {\r\n                case 'cover':\r\n                    if (resumeItems && resumeItems.cover) {\r\n                        body_content = resumeItems.cover;\r\n                    }\r\n                    break;\r\n                case 'edu':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_education_history');\r\n                    if (data.itemid && resumeItems && resumeItems.educations[data.itemid]) {\r\n                        item_data = resumeItems.educations[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"edu_institution\">' + item_data.institution + ':</span> ';\r\n                        description += '<span class=\"edu_qualname\">' + item_data.qualname + '</span>';\r\n                        if (item_data.startdate != '' || item_data.enddate != '') {\r\n                            description += ' (';\r\n                            if (item_data.startdate != '') {\r\n                                description += '<span class=\"edu_startdate\">' + item_data.startdate + '</span>';\r\n                            }\r\n                            if (item_data.enddate != '') {\r\n                                description += '<span class=\"edu_enddate\"> - ' + item_data.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (item_data.qualdescription != '') {\r\n                            description += '<span class=\"edu_qualdescription\">' + item_data.qualdescription + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'employ':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_employment_history');\r\n                    if (data.itemid && resumeItems && resumeItems.employments[data.itemid]) {\r\n                        item_data = resumeItems.employments[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"employ_jobtitle\">' + item_data.jobtitle + ':</span> ';\r\n                        description += '<span class=\"employ_employer\">' + item_data.employer + '</span>';\r\n                        if (item_data.startdate != '' || item_data.enddate != '') {\r\n                            description += ' (';\r\n                            if (item_data.startdate != '') {\r\n                                description += '<span class=\"employ_startdate\">' + item_data.startdate + '</span>';\r\n                            }\r\n                            if (item_data.enddate != '') {\r\n                                description += '<span class=\"employ_enddate\"> - ' + item_data.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (item_data.positiondescription != '') {\r\n                            description += '<span class=\"employ_positiondescription\">' + item_data.positiondescription + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'certif':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_certif');\r\n                    if (data.itemid && resumeItems && resumeItems.certifications[data.itemid]) {\r\n                        item_data = resumeItems.certifications[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"certif_title\">' + item_data.title + '</span> ';\r\n                        if (item_data.date != '') {\r\n                            description += '<span class=\"certif_date\">(' + item_data.date + ')</span>';\r\n                        }\r\n                        if (item_data.description != '') {\r\n                            description += '<span class=\"certif_description\">' + item_data.description + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'public':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_public');\r\n                    if (data.itemid && resumeItems && resumeItems.publications[data.itemid]) {\r\n                        item_data = resumeItems.publications[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"public_title\">' + item_data.title;\r\n                        if (item_data.contribution != '') {\r\n                            description += ' (' + item_data.contribution + ')';\r\n                        }\r\n                        description += '</span> ';\r\n                        if (item_data.date != '') {\r\n                            description += '<span class=\"public_date\">(' + item_data.date + ')</span>';\r\n                        }\r\n                        if (item_data.contributiondetails != '' || item_data.url != '') {\r\n                            description += '<span class=\"public_description\">';\r\n                            if (item_data.contributiondetails != '') {\r\n                                description += item_data.contributiondetails;\r\n                            }\r\n                            if (item_data.url != '') {\r\n                                description += '<br /><a href=\"' + item_data.url + '\" class=\"public_url\" target=\"_blank\">' + item_data.url + '</a>';\r\n                            }\r\n                            description += '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'mbrship':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_mbrship');\r\n                    if (data.itemid && resumeItems && resumeItems.profmembershipments[data.itemid]) {\r\n                        item_data = resumeItems.profmembershipments[data.itemid];\r\n                        attachments = item_data.attachments;\r\n                        var description = '';\r\n                        description += '<span class=\"mbrship_title\">' + item_data.title + '</span> ';\r\n                        if (item_data.startdate != '' || item_data.enddate != '') {\r\n                            description += ' (';\r\n                            if (item_data.startdate != '') {\r\n                                description += '<span class=\"mbrship_startdate\">' + item_data.startdate + '</span>';\r\n                            }\r\n                            if (item_data.enddate != '') {\r\n                                description += '<span class=\"mbrship_enddate\"> - ' + item_data.enddate + '</span>';\r\n                            }\r\n                            description += ')';\r\n                        }\r\n                        if (item_data.description != '') {\r\n                            description += '<span class=\"mbrship_description\">' + item_data.description + '</span>';\r\n                        }\r\n                        body_content = description;\r\n                    }\r\n                    break;\r\n                case 'goalspersonal':\r\n                case 'goalsacademic':\r\n                case 'goalscareers':\r\n                case 'skillspersonal':\r\n                case 'skillsacademic':\r\n                case 'skillscareers':\r\n                    attachments = resumeItems[data.resume_itemtype + '_attachments'];\r\n                    // console.log(resumeItems);\r\n                    // console.log(data.resume_itemtype + '_attachments');\r\n                    addToHeader = $E.translate('resume_' + data.resume_itemtype);\r\n                    var description = '';\r\n                    if (resumeItems['' + data.resume_itemtype]) {\r\n                        description += '<span class=\"' + data.resume_itemtype + '_text\">' + resumeItems['' + data.resume_itemtype] + '</span> ';\r\n                    }\r\n                    body_content = description;\r\n                    break;\r\n                case 'interests':\r\n                    addToHeader = $E.translate('cofigureblock_cvinfo_interests');\r\n                    var description = '';\r\n                    if (resumeItems.interests != '') {\r\n                        description += '<span class=\"interests\">' + resumeItems.interests + '</span> ';\r\n                    }\r\n                    body_content = description;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (data.resume_withfiles == \"1\" && attachments && attachments.length) {\r\n                body_content += '<ul class=\"resume_attachments ' + data.resume_itemtype + '_attachments\">';\r\n                $.each(attachments, function (k, file) {\r\n                    body_content += '<li><a href=\"' + file.fileurl + '\" target=\"_blank\">' + file.filename + '</a></li>';\r\n                });\r\n                body_content += '</ul>';\r\n            }\r\n\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"cv_info\" style=\"overflow: hidden;\">';\r\n            tempString += '<div class=\"header\">' + $E.translate('cvinformation') + ': ' + addToHeader + '</div>';\r\n            tempString += '<div class=\"body\">' + body_content + '</div>';\r\n            tempString += '</div>';\r\n            $item.html(tempString);\r\n        } else {\r\n            data.type = 'text';\r\n            var tempString = '<div id=\"id_holder\" style=\"display:none;\"></div>';\r\n            tempString += '<div class=\"header\"></div>';\r\n            tempString += '<div class=\"body\"><p class=\"text\" ' + $E.translate('view_specialitem_text_defaulttext') + '\"></p></div>';\r\n            $item.html(tempString);\r\n            $item.find('div.header').append($E.translate('view_specialitem_text') + ($.trim(data.block_title).length ? ': ' + data.block_title : ''));\r\n            $item.find('div.body').append(data.print_text);\r\n        }\r\n\r\n        // Insert default texts.\r\n        $item.find(':input[default-text]').focus(function(){\r\n            $(this).removeClass('default-text');\r\n            if ($(this).attr('default-text') == $(this).val()) {\r\n                $(this).val('');\r\n            }\r\n        }).blur(function(){\r\n            if (!$.trim($(this).val())) {\r\n                $(this).addClass('default-text');\r\n                $(this).val($(this).attr('default-text'));\r\n            }\r\n        }).blur();\r\n        $item.find('div#id_holder').append(data.id);\r\n\r\n        if (type == 'new') {\r\n            // No edit button for items, badges and resume items.\r\n            var typesWithoutEditButton = ['item', 'badge', 'cv_information', 'cv_group'];\r\n            // if ((data.type != 'item') && (data.type != 'badge')) {\r\n            if (!(typesWithoutEditButton.indexOf(data.type) > -1)) {\r\n                $('<a class=\"edit\" title=\"Edit\"><i class=\"fa-solid fa-pen-to-square\" /><span>Edit</span></a>').prependTo($item).click(editItemClick); // for fontawesome icons\r\n                // $('<a class=\"edit\" title=\"Edit\"><span>Edit</span></a>').prependTo($item).click(editItemClick);\r\n            }\r\n        }\r\n        else {\r\n            $item.append('<a class=\"unsaved\" title=\"This block was not saved\"><span>Unsaved</span></a>');\r\n        }\r\n        $('<a class=\"delete\" title=\"' + $E.translate('delete') + '\"><i class=\"fa-regular fa-trash-can\" /><span>' + $E.translate('delete') + '</span></a>').prependTo($item).click(deleteItemClick); // for fontawesome icons\r\n        // $('<a class=\"delete\" title=\"' + $E.translate('delete') + '\"><span>' + $E.translate('delete') + '</span></a>').prependTo($item).click(deleteItemClick);\r\n        $item.find(':input').change(function() {\r\n            $item.data('portfolio').text = $(this).val();\r\n        });\r\n        updateBlockData();\r\n        // Unshared blocks.\r\n        if (data.unshared == 1) {\r\n            $item.find('div.item_info').addClass('unshared_block');\r\n            $item_header = $item.find('div.header').html();\r\n            $item.find('div.header').html($item_header + '<span class=\"unshared_message\">Unshared</span>');\r\n        }\r\n\r\n        // update fontawesome icons\r\n        block_exaport_update_fontawesome_icons($item);\r\n\r\n        return $item;\r\n    }\r\n\r\n    // Click on 'delete' block.\r\n    function deleteItemClick()\r\n    {\r\n        $(this).parents('.item').remove();\r\n        resetElementStates();\r\n        updateBlockData();\r\n    }\r\n\r\n    function saveBlockData() {\r\n        var data = $('form#view_edit_form').serializeArray();\r\n        data.push({name: 'ajax', value: 1});\r\n        console.log('views.js:1126');console.log(data);// !!!!!!!!!! delete it\r\n        showPreloadinator($('#view-preview'), '', true);\r\n        $.ajax({\r\n            url: document.location.href,\r\n            type: 'POST',\r\n            data: data,\r\n            success: function(res) {\r\n                var data = JSON.parse(res);\r\n                $('form :input[name=blocks]').val(data.blocks);\r\n                exaportViewEdit.resetViewContent();\r\n                hidePreloadinator($('#view-preview'), '');\r\n            }\r\n        });\r\n    }\r\n\r\n    function editItemClick()\r\n    {\r\n        var item_id = $(this).parent().find(\"#id_holder\").html();\r\n        lastclicked = $(this).parent();\r\n        showPreloadinator(lastclicked, '', false);\r\n        $.ajax({\r\n            url: M.cfg['wwwroot'] + '/blocks/exaport/blocks.json.php',\r\n            type: 'POST',\r\n            data: {\r\n                item_id: item_id,\r\n                action: 'edit',\r\n                'viewid': $('form :input[name=viewid]').val(),\r\n                'text[itemid]': $('form :input[name=draft_itemid]').val(),\r\n                sesskey: $('form :input[name=sesskey]').val()\r\n            },\r\n            success: function(res) {\r\n                var data = JSON.parse(res);\r\n\r\n                showDialog(data.modalTitle, data.html);\r\n                // Focus first element.\r\n                // ...popup.$body.find('input:visible:first').focus();.\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    // Main function -> will be started on page load.\r\n    var initContentEdit = function() {\r\n\r\n        exaportViewEdit = exaportViewEditCreate();\r\n        exaportViewEdit.resetViewContent();\r\n\r\n        $(\".portfolioDesignBlocks\").sortable({\r\n            beforeStop: function (event, ui) {\r\n                newItem = ui.item;\r\n            },\r\n            receive: function(e, ui){\r\n\r\n                console.log('start to modal!');\r\n\r\n                // Get ajax only for item from the top block.\r\n                var uiattr = $(ui.item[0]).closest('ul').prop(\"className\");\r\n                if (uiattr.search(\"portfolioDesignBlocks\") == -1) {\r\n                    $.ajax({\r\n                        url: M.cfg['wwwroot'] + '/blocks/exaport/blocks.json.php',\r\n                        type: 'POST',\r\n                        data: {\r\n                            type_block: ui.item.attr('block-type'),\r\n                            action: 'add',\r\n                            'viewid': $('form :input[name=viewid]').val(),\r\n                            'text[itemid]': $('form :input[name=draft_itemid]').val(),\r\n                            sesskey: $('form :input[name=sesskey]').val()\r\n                        },\r\n                        success: function(res) {\r\n                            var data = JSON.parse (res);\r\n\r\n                            showDialog(data.modalTitle, data.html);\r\n\r\n                            // ...var popup = $E.popup({ body_content: data.html, onhide: function(){\r\n                            // if (newItem) $(newItem).remove();\r\n                            // } });\r\n                            // focus first element\r\n                            // $E.last_popup.$body.find('input:visible:first').focus();.\r\n\r\n                            // Create a <script> tag from result.\r\n                            $('#temp_javascript').remove();\r\n                            var script = document.createElement('script');\r\n                            $(script).attr('id', 'temp_javascript');\r\n                            // console.log(data.script);\r\n                            script.textContent = data.script;\r\n                            document.body.appendChild(script);\r\n\r\n                            $('body').on('change keydown paste input', '#filterByTitle', exaportViewEdit.filterItemsByTitle);\r\n                        }\r\n                    });\r\n                    updateBlockData();\r\n                }\r\n            },\r\n            update: function(e, ui) {\r\n                updateBlockData();\r\n            },\r\n            handle: '.header',\r\n            placeholder: \"block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            connectWith: ['.portfolioDesignBlocks'],\r\n        });\r\n        $(\".portfolioOptions\").sortable({\r\n            connectWith: ['.portfolioDesignBlocks'],\r\n            placeholder: \"block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            stop: function(e, ui) {\r\n                // Listenelemente zurÃ¼cksetzen.\r\n                resetElements();\r\n            }\r\n            /*\r\n            remove: function(e, ui){\r\n                console.log(ui);\r\n                console.log(ui.element.html());\r\n                // ui.item.after(ui.placeholder.clone().css('visibility', ''));\r\n                console.log('remove');\r\n            }\r\n            */\r\n        });\r\n        $(\".portfolioElement\").draggable({\r\n            connectToSortable: '.portfolioDesignBlocks',\r\n            placeholder: \".block-placeholder\",\r\n            forcePlaceholderSize: true,\r\n            helper: \"clone\",\r\n            stop: function(e, ui){\r\n                showPreloadinator($(ui.helper), '', false);\r\n            }\r\n        });\r\n        $('body').on('click', '[data-toggle=\"gtn-help-modal\"]', function(e) {\r\n            e.preventDefault();\r\n            var trigger = $(this);\r\n            var title = $(this).attr('data-title');\r\n            var content = $(this).attr('data-content');\r\n            if (helpDialogue) {\r\n                helpDialogue.setTitle(title);\r\n                helpDialogue.setBody(content);\r\n                helpDialogue.show();\r\n            } else {\r\n                modalFactory.create({\r\n                    title: title,\r\n                    body: content,\r\n                    footer: '',\r\n                }, trigger).done(function (modal) {\r\n                    helpDialogue = modal;\r\n                    helpDialogue.setTitle(title);\r\n                    helpDialogue.setBody(content);\r\n                    // Display the dialogue.\r\n                    helpDialogue.show();\r\n                });\r\n            }\r\n        });\r\n\r\n\r\n    } // End initContentEdit.\r\n\r\n    function showPreloadinator(element, tohide, fixedposition) {\r\n        var id = 'preloader' + $.now();\r\n        var preloadinatorTemplate = '<div id=\"' + id + '\" class=\"preloader ' + (fixedposition ? 'preloader-fixed' : '') + ' js-preloader flex-center\">' +\r\n                '<div class=\"dots\">'+\r\n                    '<div class=\"dot\"></div>'+\r\n                    '<div class=\"dot\"></div>'+\r\n                    '<div class=\"dot\"></div>'+\r\n                '</div>'+\r\n            '</div>';\r\n        if (tohide != '') {\r\n            element.find(tohide).hide();\r\n        }\r\n        element.append(preloadinatorTemplate);\r\n        // hide element on very long requests\r\n        setTimeout('$(\\'#' + id + '\\').remove();', 15000); // 15 seconds\r\n\r\n    } // End showPreloadinator\r\n\r\n    function hidePreloadinator(element, toshow) {\r\n        if (toshow != '') {\r\n            $(element).find('.blocktype').show();\r\n        }\r\n        $(element).find('.preloader').remove();\r\n    } // End hidePreloadinator\r\n\r\n    function showDialog(title, body) {\r\n        if (dialogue) {\r\n            dialogue.setTitle(title);\r\n            dialogue.setBody(body);\r\n            // Display the dialogue.\r\n            dialogue.show();\r\n        } else {\r\n            modalFactory.create(defaultModalOptions).done(function (modal) {\r\n                dialogue = modal;\r\n                dialogue.setTitle(title);\r\n                dialogue.setBody(body);\r\n                // Display the dialogue.\r\n                dialogue.show();\r\n                // On show handler\r\n                /*dialogue.getRoot().on(modalEvents.shown, function () {\r\n                    console.log('modal is shown');\r\n                    console.log(data);\r\n                    dialogue.setTitle(data.modalTitle);\r\n                    dialogue.setBody(data.html);\r\n                });*/\r\n                // On show handler. (for slow requests)\r\n                dialogue.getRoot().on(modalEvents.shown, function () {\r\n                    hidePreloadinator(newItem, '.blocktype');\r\n                    hidePreloadinator(lastclicked, '');\r\n                    // console.log('modal is shown');\r\n                });\r\n                // On hide handler.\r\n                dialogue.getRoot().on(modalEvents.hidden, function () {\r\n                    // Empty modal contents when it's hidden.\r\n                    // console.log('modal is hidden');\r\n                    dialogue.setBody('');\r\n                    // Hide handler.\r\n                    if (newItem) {\r\n                        $(newItem).remove();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    // Sharing.\r\n    function update_sharing()\r\n    {\r\n        var share_text = '';\r\n        var $form = $('#exaport-view-mod');\r\n\r\n        if ($form.find(':input[name=externaccess]').is(':checked')) {\r\n            share_text += $E.translate('externalaccess') + ' ';\r\n            $('#externaccess-settings').show();\r\n        } else {\r\n            $('#externaccess-settings').hide();\r\n        }\r\n\r\n        if ($form.find(':input[name=internaccess]').is(':checked')) {\r\n            $('#internaccess-settings').show();\r\n            $('#internaccess-groups').hide();\r\n            if (share_text) {\r\n                share_text += ' ' + $E.translate('viewand') + ' ';\r\n            }\r\n            share_text += $E.translate('internalaccess') + ': ';\r\n\r\n            if ($form.find(':input[name=shareall]:checked').val() == 1) {\r\n                share_text += $E.translate('internalaccessall');\r\n                $('#internaccess-users').hide();\r\n                $('#internaccess-groups').hide();\r\n            } else if ($form.find(':input[name=shareall]:checked').val() == 2) {\r\n                share_text += $E.translate('internalaccessgroups');\r\n                $('#internaccess-users').hide();\r\n                $('#internaccess-groups').show();\r\n                ExabisEportfolio.load_grouplist('views_mod');\r\n            } else {\r\n                share_text += $E.translate('internalaccessusers');\r\n                $('#internaccess-groups').hide();\r\n                $('#internaccess-users').show();\r\n                ExabisEportfolio.load_userlist('views_mod');\r\n            }\r\n        } else {\r\n            $('#internaccess-settings').hide();\r\n        }\r\n\r\n        if ($form.find(':input[name=sharedemails]').is(':checked')) {\r\n            if (share_text) {\r\n                share_text += ' ' + $E.translate('viewand') + ' ';\r\n            };\r\n            share_text += $E.translate('emailaccess') + ' ';\r\n            $('#emailaccess-settings').show();\r\n        } else {\r\n            $('#emailaccess-settings').hide();\r\n        };\r\n\r\n        if (!share_text) {\r\n            share_text = $E.translate('view_sharing_noaccess');\r\n        }\r\n        $('#view-share-text').html(share_text);\r\n    }\r\n\r\n    /*var initialise = function($params) {\r\n            console.log('exaport AMD loaded');\r\n            initContentEdit();\r\n            // for sharing of views\r\n            // changing the checkboxes / radiobuttons update the sharing text, visible options, etc.\r\n            $('.view-sharing input[type=checkbox], .view-sharing input[type=radio]').click(update_sharing);\r\n            update_sharing();\r\n        };\r\n        return initialise();.\r\n    */\r\n\r\n    // MAIN code of MODULE.\r\n    return {\r\n        initialise: function (/*$params*/) {\r\n            // console.log('exaport AMD loaded');\r\n            initContentEdit();\r\n            // For sharing of views\r\n            // changing the checkboxes / radiobuttons update the sharing text, visible options, etc.\r\n            $('.view-sharing input[type=checkbox], .view-sharing input[type=radio]').click(update_sharing);\r\n            update_sharing();\r\n        },\r\n    };\r\n\r\n});\r\n"],"names":["exaportViewEdit","newItem","lastclicked","define","$","jqui","jquitp","modalFactory","modalEvents","dialogue","helpDialogue","defaultModalOptions","title","body","footer","resetElementStates","removeClass","each","this","data","itemid","addClass","updateBlockData","blocks","positionx","children","not","positiony","push","extend","val","JSON","stringify","generateItem","type","$item","attr","text","block_title","firstname","lastname","picture","email","css","portfolioItems","window","$E","block_exaport","item","item_data","ilink","link","translate","itemPictures","filescount","imgWidth","imi","M","cfg","id","tempString","name","category","comments","competences","html","find","intro","append","print_text","trim","length","contentmedia","badge","imageUrl","description","body_content","attachments","resume_itemtype","addToHeader","resumeItems","cover","itemIds","split","forEach","index","educations","institution","qualname","startdate","enddate","qualdescription","resume_withfiles","k","file","fileurl","filename","employments","jobtitle","employer","positiondescription","certifications","date","publications","contribution","contributiondetails","url","profmembershipments","goalSkillType","replace","attachmentsContent","addAttachmentsToGroup","interests","focus","blur","indexOf","prependTo","click","editItemClick","deleteItemClick","change","unshared","$item_header","block_exaport_update_fontawesome_icons","parents","remove","saveBlockData","serializeArray","value","console","log","showPreloadinator","ajax","document","location","href","success","res","parse","resetViewContent","hidePreloadinator","item_id","parent","action","sesskey","showDialog","modalTitle","initContentEdit","strip_tags","DOMParser","parseFromString","textContent","myresume","portfolioDesignBlocks","empty","appendTo","initAddItems","event","$input","target","is","prop","addPersonalInfo","checkFields","Object","fncheckbox","first","undefined","lncheckbox","iframe","iframetextElement","contents","hide","addHeadline","addText","addItem","i","clone","after","addCvInfo","category_grouping","groupedValues","cvtype","keys","map","groupType","join","addMedia","width","height","create_as_note","addBadge","ok","forInput","input","show","filterItemsByTag","selectedTag","elementTags","category_id","filterItemsByTitle","selectedIndex","toLowerCase","clearItemFilters","cancelAddEdit","sortable","beforeStop","ui","receive","e","closest","search","type_block","script","createElement","appendChild","on","update","handle","placeholder","forcePlaceholderSize","connectWith","stop","resetElements","draggable","connectToSortable","helper","preventDefault","trigger","content","setTitle","setBody","create","done","modal","element","tohide","fixedposition","now","preloadinatorTemplate","setTimeout","toshow","getRoot","shown","hidden","update_sharing","share_text","$form","ExabisEportfolio","load_grouplist","load_userlist","initialise"],"mappings":"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"}