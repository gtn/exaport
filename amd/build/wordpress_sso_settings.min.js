define("block_exaport/wordpress_sso_settings",["exports","jquery","core/toast","core/config"],(function(_exports,_jquery,_toast,_config){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(){function checkEnabledWpSSO(){var relatedOptions=["admin-wp_sso_url","admin-wp_sso_passphrase"];(0,_jquery.default)("#id_s_block_exaport_wp_sso_enabled").prop("checked")?(0,_jquery.default)(relatedOptions).each((function(i,elementId){(0,_jquery.default)("#"+elementId).show(50)})):(0,_jquery.default)(relatedOptions).each((function(i,elementId){(0,_jquery.default)("#"+elementId).hide(50)}))}(0,_jquery.default)("#admin-block_exaport_button_with_js").hide(),checkEnabledWpSSO(),(0,_jquery.default)(document).on("click",".block_exaport_request_wp_sso_passphrase, .block_exaport_remove_passphrase, .block_exaport_test_passphrase",(function(e){e.preventDefault();var theButton=(0,_jquery.default)(this),action="-NO-";theButton.hasClass("block_exaport_request_wp_sso_passphrase")?action="requestPassphrase":theButton.hasClass("block_exaport_remove_passphrase")?action="removePassphrase":theButton.hasClass("block_exaport_test_passphrase")&&(action="testPassphrase");var data={wp_action:action,sesskey:_config.default.sesskey};if("requestPassphrase"===action){var secret=_jquery.default.trim((0,_jquery.default)(".block_exaport_secret_input").val());if(!secret)return alert("Enter the secret!"),!1;data.secret=secret}_jquery.default.ajax({url:M.cfg.wwwroot+"/blocks/exaport/importexport.php",type:"POST",dataType:"json",data:data,xhrFields:{withCredentials:!0}}).done((function(data){"success"===data.result?(0,_jquery.default)(".block_exaport_message").replaceWith(data.html):"alert"===data.result?(0,_toast.add)(data.message,{type:"success",autohide:!0}):"error"===data.result&&(0,_toast.add)("Error <br>"+data.message,{type:"danger",autohide:!1,closeButton:!0})})).fail((function(jqXHR,textStatus,errorThrown){(0,_toast.add)("Something went wrong!",{type:"danger",autohide:!1,closeButton:!0}),console.log("error:",errorThrown,"code: 1745419297633")}))})),(0,_jquery.default)("body").on("change","#id_s_block_exaport_wp_sso_enabled",(function(){checkEnabledWpSSO()}))},_jquery=_interopRequireDefault(_jquery),_config=_interopRequireDefault(_config)}));

//# sourceMappingURL=wordpress_sso_settings.min.js.map