function wpRequest(action,parameters,successFunction,failureFunction){var ajaxUrl=jQueryExaport(".exaport-wp-form").attr("data-ajaxUrl");jQueryExaport.ajax({url:ajaxUrl,type:"POST",data:{wpAction:1,parameters:parameters,action:action},success:function(res){successFunction(res)},failure:function(res){failureFunction(res)}})}define("block_exaport/wpexport",["jquery","core/notification","core/toast"],(function($,notification,toast){return{init:()=>{$("body").on("click",".exaport-wp-login, .exaport-wp-loginUpdate",(function(e){e.preventDefault(),$(".exaport-wp-error").remove();var theButton=$(this),action="login",successMessage="Logged in";theButton.hasClass("exaport-wp-loginUpdate")&&(action="loginUpdate",successMessage="Updated"),wpRequest(action,[],(function(response){(response=JSON.parse(response).response).success&&(wpRequest("wpForm",[],(function(response){theButton.closest("form").html(response)})),toast.add(successMessage,{type:"success",autohide:!0})),response.error&&toast.add(response.message,{type:"danger",autohide:!1,closeButton:!0})}),(function(result){toast.add("Error: 1745225660311",{type:"danger",autohide:!1,closeButton:!0})}))})),$("body").on("click",".exaport-wp-viewExport, .exaport-wp-viewUpdate, .exaport-wp-viewRemove",(function(e){e.preventDefault(),$(".exaport-wp-error").remove();var theButton=$(this),viewId=theButton.attr("data-viewId"),data={viewId:viewId},action="viewExport",successMessage="Exported";if(theButton.hasClass("exaport-wp-viewUpdate")){action="viewUpdate";successMessage="Updated"}else if(theButton.hasClass("exaport-wp-viewRemove")){action="viewRemove";successMessage="Removed"}var buttonIcon=theButton.find(".exaport-icon");buttonIcon.addClass("fa-spin"),wpRequest(action,data,(function(response){if((response=JSON.parse(response).response)&&response.success){if("viewRemove"==action){$(".exaport-wp-viewPreview[data-viewId="+viewId+"]").addClass("d-none").attr("href","#"),$(".exaport-wp-viewExport[data-viewId="+viewId+"]").removeClass("d-none"),$(".exaport-wp-viewUpdate[data-viewId="+viewId+"]").addClass("d-none"),$(".exaport-wp-viewRemove[data-viewId="+viewId+"]").addClass("d-none"),(iconWrapper=$(".wp-exported-icons-wrapper[data-viewId="+viewId+"]")).find(".exaport-icon").addClass("d-none"),$(".wp-exported-wptimemodified-wrapper[data-viewId="+viewId+"]").text("")}else{var iconWrapper,viewButton=$(".exaport-wp-viewPreview[data-viewId="+viewId+"]");viewButton.removeClass("d-none"),viewButton.attr("href",response.view.url),$(".exaport-wp-viewExport[data-viewId="+viewId+"]").addClass("d-none"),$(".exaport-wp-viewUpdate[data-viewId="+viewId+"]").removeClass("d-none"),$(".exaport-wp-viewRemove[data-viewId="+viewId+"]").removeClass("d-none"),(iconWrapper=$(".wp-exported-icons-wrapper[data-viewId="+viewId+"]")).find(".exaport-icon").addClass("d-none"),iconWrapper.find(".exaport-icon.wp-exported").removeClass("d-none"),$(".wp-exported-wptimemodified-wrapper[data-viewId="+viewId+"]").text(response.view.timemodified)}toast.add(successMessage,{type:"success",autohide:!0})}response&&response.error&&toast.add(response.message,{type:"danger",autohide:!1,closeButton:!0}),response||toast.add("Request error!",{type:"danger",autohide:!1,closeButton:!0}),buttonIcon.removeClass("fa-spin")}),(function(result){buttonIcon.removeClass("fa-spin"),toast.add("Request error!",{type:"danger",autohide:!1,closeButton:!0})}))})),$("body").on("click",".exaport-wp-cvExport, .exaport-wp-cvUpdate, .exaport-wp-cvRemove",(function(e){e.preventDefault(),$(".exaport-wp-error").remove();var theButton=$(this),action="cvExport",successMessage="Exported";if(theButton.hasClass("exaport-wp-cvUpdate")){action="cvUpdate";successMessage="Updated"}else if(theButton.hasClass("exaport-wp-cvRemove")){action="cvRemove";successMessage="Removed"}var buttonIcon=theButton.find(".exaport-icon");buttonIcon.addClass("fa-spin"),wpRequest(action,{},(function(response){(response=JSON.parse(response).response)&&response.success&&("cvRemove"==action?($(".exaport-wp-cv-info").addClass("d-none"),$(".exaport-wp-cvExport").removeClass("d-none")):"cvExport"==action?($(".exaport-wp-cvExport").addClass("d-none"),$(".exaport-wp-cv-info").removeClass("d-none"),$(".exaport-wp-cv-info .date").text(response.cv.timemodified),$(".exaport-wp-cv-info .exaport-wp-cvView").attr("href",response.cv.url)):($(".exaport-wp-cv-info .date").text(response.cv.timemodified),$(".exaport-wp-cv-info .exaport-wp-cvView").attr("href",response.cv.url)),toast.add(successMessage,{type:"success",autohide:!0})),response&&response.error&&toast.add(response.message,{type:"danger",autohide:!1,closeButton:!0}),response||toast.add("Request error!",{type:"danger",autohide:!1,closeButton:!0}),buttonIcon.removeClass("fa-spin")}),(function(result){buttonIcon.removeClass("fa-spin"),toast.add("Request error (code: 1745230772232)!",{type:"danger",autohide:!1,closeButton:!0})}))}))}}}));

//# sourceMappingURL=wpexport.min.js.map